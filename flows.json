[
    {
        "id": "298c337f544e92d5",
        "type": "tab",
        "label": "RL62M02_Mesh_Prov",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "f85f40305fee5602",
        "type": "tab",
        "label": "WebUI",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "fe798ccc3bac8377",
        "type": "tab",
        "label": "File Management",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8cbec6d1d47d2ee2",
        "type": "tab",
        "label": "Management",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "2d7ff302c568ee90",
        "type": "tab",
        "label": "MQTT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8250ec7acc54b0b5",
        "type": "tab",
        "label": "ChatGPT",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "149d3c3e2a44a954",
        "type": "subflow",
        "name": "RL62M02 MESH V1",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 320,
                "y": 180,
                "wires": [
                    {
                        "id": "b924bbb7ee7fb48b"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1330,
                "y": 520,
                "wires": [
                    {
                        "id": "e25635c9a88b9a08",
                        "port": 0
                    }
                ]
            },
            {
                "x": 830,
                "y": 600,
                "wires": [
                    {
                        "id": "1049678111b0d6a5",
                        "port": 0
                    }
                ]
            },
            {
                "x": 820,
                "y": 560,
                "wires": [
                    {
                        "id": "fcf7111b19b84bf1",
                        "port": 0
                    }
                ]
            },
            {
                "x": 830,
                "y": 640,
                "wires": [
                    {
                        "id": "a7b576f6c440a5ec",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1280,
                "y": 260,
                "wires": [
                    {
                        "id": "020dd99fe95b0542",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99",
        "inputLabels": [
            "MESH Control msg"
        ],
        "outputLabels": [
            "DISCOVERY info",
            "MDTG msg",
            "SYS msg",
            "MDTS msg",
            "Send to UART"
        ],
        "status": {
            "x": 1040,
            "y": 360,
            "wires": [
                {
                    "id": "551fdfb456cec5cb",
                    "port": 0
                }
            ]
        }
    },
    {
        "id": "eff4a73a11ad3f9f",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "View",
        "style": {
            "label": true,
            "fill": "#ff7f7f",
            "color": "#ff0000"
        },
        "nodes": [
            "cbc8c7dde36554ed",
            "e10a6df36558e7e2",
            "bea7f99d065ec6e8",
            "45d1ae1af4f4c072",
            "3d704988f522b366",
            "cc7f843cdf5d6825",
            "06b624f825f35a30",
            "c053997cd49abc10"
        ],
        "x": 34,
        "y": 799,
        "w": 612,
        "h": 222
    },
    {
        "id": "c622f576c96b1f4f",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Fan Controller",
        "style": {
            "fill": "#0070c0",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "cc85d6ea32c2242b",
            "6e4afd81514ba967",
            "91bdbb4a5b75f72f",
            "f2f79bbf868bdfd9",
            "0c3abfc961a4f85b",
            "9d7a695e62095720",
            "bf284062dce0734b"
        ],
        "x": 34,
        "y": 439,
        "w": 612,
        "h": 242
    },
    {
        "id": "98bbe5cf9c49f8f7",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "RGB/Plug2 Action",
        "style": {
            "label": true,
            "color": "#ff0000",
            "fill": "#ffffbf"
        },
        "nodes": [
            "f0f937d270eec204",
            "c7be7a64ce8d81e9",
            "68be2fee3aae9c69",
            "e57650c0b3a34bd0",
            "67ccd5f7bcef8211",
            "b45a05219e24e362"
        ],
        "x": 2174,
        "y": 99,
        "w": 612,
        "h": 202
    },
    {
        "id": "b30195a356d478ee",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "",
        "style": {
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "aef8c3dc96e555b6",
            "4cf82726a2e51373",
            "74bf4cd673c57ae7",
            "da113a37ea6823bc",
            "1cb3863c12af92de",
            "111245b1940ceab7",
            "74ab9eebe642c2f7",
            "c1e58f6a6fdad134",
            "7d1ce7f4f1cd7b8a",
            "161262820e6c422e",
            "c24a708bacd33124"
        ],
        "x": 674,
        "y": 699,
        "w": 392,
        "h": 282
    },
    {
        "id": "d3065452a7e33479",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "",
        "style": {
            "fill": "#ffbfbf",
            "label": true
        },
        "nodes": [
            "a43996c59e5f7d1a",
            "955d67ba77a01907",
            "6cf1cf9f370aea4b",
            "e889e3e5fe31fc97",
            "233be46f9acb32f1",
            "3217e01d9c6d6bfd",
            "370579cf06ffa162",
            "3b4861289cc2ea7c",
            "5c751c4034d324a5",
            "08c19be9e8a2cbf3",
            "7cb60262fc4ba5b5"
        ],
        "x": 674,
        "y": 1259,
        "w": 432,
        "h": 282
    },
    {
        "id": "52fdb58c6b06cc45",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "",
        "style": {
            "fill": "#dbcbe7",
            "label": true
        },
        "nodes": [
            "b8cb9daab4a79380",
            "aa38429e70ea0ba2",
            "2237046f5ef7b4e0",
            "1ce4b79ea6490119",
            "87769351c27639cf",
            "e73d1c127e515d54",
            "27f764c89746ffa2",
            "8bf876559e64eba5",
            "c91e285da6b001ac",
            "07aa5b14c47fa551"
        ],
        "x": 674,
        "y": 379,
        "w": 412,
        "h": 302
    },
    {
        "id": "6e73149f54f4c6b2",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "",
        "style": {
            "fill": "#bfdbef",
            "label": true
        },
        "nodes": [
            "4c2b127f6da39d86",
            "a730117a2dd7ba8f",
            "d8a01c53306ce2a8",
            "944b625b04ae64cb",
            "cfd33c08e499e6d0",
            "0be73bad3b25edc7",
            "205adb62cb99c472",
            "82b7146c9161b43d",
            "d20d207be71075b9"
        ],
        "x": 674,
        "y": 999,
        "w": 432,
        "h": 242
    },
    {
        "id": "7fd0484cc017c74d",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Line Notify",
        "style": {
            "fill": "#e3f3d3",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "f05b731643d2eb9d",
            "47337b6de0153805",
            "6e29483e1914a74e",
            "a53d64f71ca160fe"
        ],
        "x": 34,
        "y": 1179,
        "w": 612,
        "h": 122
    },
    {
        "id": "10aeae2f48fc9000",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Plug",
        "style": {
            "fill": "#92d04f",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "5bdb6278059a85fa",
            "0b8ab85b55bea38d",
            "902883fae92acef8",
            "edd99be935d3f97e",
            "398e94646ce79317",
            "4954f733a15ec789",
            "5e93126055ffbe99"
        ],
        "x": 674,
        "y": 1579,
        "w": 452,
        "h": 222
    },
    {
        "id": "4581c544ab4f67dc",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Fan",
        "style": {
            "fill": "#bfdbef",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "5e69845684d90118",
            "5b83c9a64ea532bd",
            "2bce3bb5ae4c2bc0"
        ],
        "x": 674,
        "y": 1959,
        "w": 432,
        "h": 122
    },
    {
        "id": "d07605ca557c7f27",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Digital Input Output",
        "style": {
            "fill": "#dbcbe7",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "ae4db55ad64e2354",
            "df56b414f3b57c97",
            "72cafe16bc63eff1",
            "a81ed3ae8eaec8c8"
        ],
        "x": 674,
        "y": 1819,
        "w": 492,
        "h": 122
    },
    {
        "id": "53147285f52a0f53",
        "type": "group",
        "z": "8cbec6d1d47d2ee2",
        "name": "",
        "style": {
            "fill": "#ffefbf",
            "label": true
        },
        "nodes": [
            "39edf58fd2703a95",
            "d60b621015456b16",
            "05db2f92486f7d88",
            "996b80f6dad8df5a",
            "f967b6e0a4f2972a"
        ],
        "x": 134,
        "y": 439,
        "w": 632,
        "h": 162
    },
    {
        "id": "5c4450d7d986425b",
        "type": "group",
        "z": "8cbec6d1d47d2ee2",
        "name": "",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "37b13cfe34a9eca0",
            "e85cf34e0d636415",
            "12361385d1e2d0a1",
            "238b7cc5f64bbd24",
            "656769a63780b8a8"
        ],
        "x": 134,
        "y": 619,
        "w": 612,
        "h": 162
    },
    {
        "id": "2f4f0392c0259930",
        "type": "group",
        "z": "8cbec6d1d47d2ee2",
        "name": "",
        "style": {
            "fill": "#ffbfbf",
            "label": true
        },
        "nodes": [
            "4c354bfa3da9019d",
            "fcdd87667545c566",
            "0518bbbcf5aa3436",
            "b6ac0ac2cbadf22e"
        ],
        "x": 294,
        "y": 279,
        "w": 452,
        "h": 142
    },
    {
        "id": "389d09060386b9ac",
        "type": "group",
        "z": "8cbec6d1d47d2ee2",
        "name": "",
        "style": {
            "fill": "#7fb7df",
            "label": true
        },
        "nodes": [
            "f4f98c7791b39b3b",
            "7b1e43c5fdc65057"
        ],
        "x": 354,
        "y": 179,
        "w": 372,
        "h": 82
    },
    {
        "id": "227f2870c3485f4b",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Temperature Humidity",
        "style": {
            "label": true,
            "color": "#ff0000",
            "fill": "#ffffbf"
        },
        "nodes": [
            "8ff2ddc8782f84c9",
            "2675b5bd95aacd55",
            "d3a552fae4ebe761",
            "632eae5290ac01f3",
            "041d11ec84815ac9",
            "1c9befdee5638ea4",
            "6cda7b1122bc4e15",
            "cbe87b26c5ee6189",
            "fb625c94df0c9286",
            "2f5ce9ec230a945c"
        ],
        "x": 1494,
        "y": 99,
        "w": 652,
        "h": 342
    },
    {
        "id": "1e4bb4113e263703",
        "type": "group",
        "z": "298c337f544e92d5",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "9d6848c3cf5e4b28",
            "4948036bf77d07f8",
            "28a81f92752b5b10",
            "2681340dcd6e7823",
            "486a5dbea3d75a02"
        ],
        "x": 514,
        "y": 539,
        "w": 872,
        "h": 242
    },
    {
        "id": "41a5f6edc92cb328",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Camera",
        "style": {
            "fill": "#b797cf",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "db3e358ca3c41df6",
            "e13d1c775068bff0",
            "86d1e7f6d7569b42",
            "f41c46f15fb7b601",
            "94c8e5c626de76b6"
        ],
        "x": 34,
        "y": 1039,
        "w": 612,
        "h": 122
    },
    {
        "id": "e0cd5f2e6fa3a8b6",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Clock",
        "style": {
            "label": true,
            "color": "#ff0000",
            "fill": "#d1d1d1"
        },
        "nodes": [
            "c81789d9938fd9b0",
            "37175168d9397373"
        ],
        "x": 34,
        "y": 699,
        "w": 612,
        "h": 82
    },
    {
        "id": "a6ad5e1c1d6001c9",
        "type": "group",
        "z": "f85f40305fee5602",
        "name": "Chat",
        "style": {
            "fill": "#bfdbef",
            "label": true,
            "color": "#ff0000"
        },
        "nodes": [
            "2d700e0c5209ab5b",
            "cae09427295713ef",
            "9466cd280e25992f"
        ],
        "x": 14,
        "y": 1899,
        "w": 632,
        "h": 82
    },
    {
        "id": "f51b9b50909a6cf7",
        "type": "group",
        "z": "149d3c3e2a44a954",
        "style": {
            "stroke": "#999999",
            "stroke-opacity": "1",
            "fill": "none",
            "fill-opacity": "1",
            "label": true,
            "label-position": "nw",
            "color": "#a4a4a4"
        },
        "nodes": [
            "8b241851ba46e8a8",
            "4516c04f308bd0ca",
            "145b82f49810a7aa",
            "e2d48f33ed13c765",
            "94b6dddfa5d4a372",
            "22c9d455772ddc6e",
            "285ad663439cf0c1",
            "4c5fc4bdf731b55f",
            "f4b0fd359c8facf4",
            "a5a4eabdb4ae0e40",
            "e3c253cbf16ef731",
            "7c694ef16308bbee",
            "75c50b9957c6c830"
        ],
        "x": 14,
        "y": 19,
        "w": 252,
        "h": 582
    },
    {
        "id": "2fe1a9b32ffb655c",
        "type": "group",
        "z": "fe798ccc3bac8377",
        "name": "設備檔案管理",
        "style": {
            "fill": "#ffffbf",
            "label": true
        },
        "nodes": [
            "a9c1abc2ec0cbb9d",
            "09b7e067abac609c",
            "da70d3343c11c582",
            "764069cfe3aa7583",
            "94864f9d75c9de14",
            "09166fed0d7c8e3e",
            "cbc3ded3dcc05003",
            "b209974ab64a1e28",
            "3e5ea0bc3f176061",
            "315c7d88922d92aa",
            "ded16657c80bcb9f",
            "1f7ce5339e0d975e",
            "b3595949d9989a53",
            "a39345f093ed8418"
        ],
        "x": 134,
        "y": 39,
        "w": 972,
        "h": 282
    },
    {
        "id": "cc49724e187187ad",
        "type": "group",
        "z": "fe798ccc3bac8377",
        "name": "資料CSV檔案處理",
        "style": {
            "fill": "#e3f3d3",
            "label": true
        },
        "nodes": [
            "82a97b9d8c0f5981",
            "6c54b625cf180f3c",
            "deef6a95e127917c",
            "4641f68b0a4189a7",
            "85895d137d570d70",
            "9a6299e6ae23d741",
            "4ba7de3c18cec7f7",
            "b298019e3ead7f10",
            "c20f89f2de5c6902",
            "ac7479d3236d1ab4",
            "20594bfde7d78dda",
            "c40aca5205869f43",
            "0f1b22f8d12f3bcb",
            "8361f4051e87563a",
            "0fb8096ba6ed2dc0",
            "b0378e5b513ab50c",
            "e4963a404cfdc9b3"
        ],
        "x": 94,
        "y": 359,
        "w": 1072,
        "h": 242
    },
    {
        "id": "0d53d99ff5bb2375",
        "type": "group",
        "z": "8cbec6d1d47d2ee2",
        "name": "裝置狀態顯示",
        "style": {
            "label": true
        },
        "nodes": [
            "c557bea2b1ac609e",
            "8b31d656beef7858",
            "8f8d0ffbf6217586",
            "401f71bb2b254823",
            "51e7de832ca1b2b6",
            "c5b70cac176018c7",
            "54dd10c75cfcdfbe"
        ],
        "x": 114,
        "y": 1039,
        "w": 832,
        "h": 162
    },
    {
        "id": "ecafa6091ee23aa4",
        "type": "group",
        "z": "8cbec6d1d47d2ee2",
        "name": "搜尋裝置顯示與綁定",
        "style": {
            "label": true
        },
        "nodes": [
            "f54b1e4963170cd5",
            "e48e67b9deb41cf2",
            "99de58fccf0a4590",
            "9f6e80da7a129547",
            "14c1ec66924aafad",
            "013c5b78ffda5222",
            "b8c5e28b91f59c7a",
            "877a2e87b6b69bc1",
            "efa54db14fb13f2f"
        ],
        "x": 94,
        "y": 799,
        "w": 952,
        "h": 202
    },
    {
        "id": "020dd99fe95b0542",
        "type": "junction",
        "z": "149d3c3e2a44a954",
        "x": 1160,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "e25635c9a88b9a08",
        "type": "junction",
        "z": "149d3c3e2a44a954",
        "x": 1220,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "28f5a02b81acf722",
        "type": "ui_base",
        "theme": {
            "name": "theme-dark",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#0094CE",
                "baseFont": "Arial Black,Arial Black,Gadget,sans-serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": true,
                "reset": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
            },
            "themeState": {
                "base-color": {
                    "default": "#097479",
                    "value": "#097479",
                    "edited": false
                },
                "page-titlebar-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#111111",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#0eb8c0",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#555555",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#eeeeee",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#097479",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#333333",
                    "edited": false
                },
                "base-font": {
                    "value": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "PPP",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "false",
            "allowTempTheme": "true",
            "dateFormat": "DD/MM/YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 0,
                "py": 0
            }
        }
    },
    {
        "id": "7a5d15765d1785d0",
        "type": "serial-port",
        "name": "Prov_UART",
        "serialport": "COM6",
        "serialbaud": "115200",
        "databits": "8",
        "parity": "none",
        "stopbits": "1",
        "waitfor": "",
        "dtr": "none",
        "rts": "none",
        "cts": "none",
        "dsr": "none",
        "newline": "\\n",
        "bin": "false",
        "out": "char",
        "addchar": "\\r\\n",
        "responsetimeout": "100"
    },
    {
        "id": "d0b58772ca9126ea",
        "type": "ui_tab",
        "name": "Dashboard",
        "icon": "dashboard",
        "order": 1,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "677a19ebf2be3c4c",
        "type": "ui_group",
        "name": "  View",
        "tab": "d0b58772ca9126ea",
        "order": 7,
        "disp": true,
        "width": 8,
        "collapse": false,
        "className": ""
    },
    {
        "id": "fb766d1bd8dbb766",
        "type": "global-config",
        "name": "global-config",
        "env": []
    },
    {
        "id": "8072c1412b794784",
        "type": "ui_group",
        "name": "Fan",
        "tab": "d0b58772ca9126ea",
        "order": 6,
        "disp": true,
        "width": "3",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d50283c991ec49e9",
        "type": "ui_tab",
        "name": "Management",
        "icon": "dashboard",
        "order": 2,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "91ac9518a0b9be8c",
        "type": "ui_group",
        "name": "新增裝置",
        "tab": "d50283c991ec49e9",
        "order": 2,
        "disp": true,
        "width": 3,
        "collapse": false,
        "className": ""
    },
    {
        "id": "29f46230ac4e7e76",
        "type": "ui_group",
        "name": "刪除裝置",
        "tab": "d50283c991ec49e9",
        "order": 3,
        "disp": true,
        "width": "3",
        "collapse": false,
        "className": ""
    },
    {
        "id": "d96c0dea78d55eb4",
        "type": "ui_group",
        "name": "查詢",
        "tab": "d50283c991ec49e9",
        "order": 1,
        "disp": true,
        "width": 12,
        "collapse": false,
        "className": ""
    },
    {
        "id": "f3b36070034d01cb",
        "type": "openaiApiKey",
        "name": "APIKEY"
    },
    {
        "id": "9554a493ec458fae",
        "type": "ui_tab",
        "name": "ChatGPT",
        "icon": "dashboard",
        "order": 3,
        "disabled": false,
        "hidden": false
    },
    {
        "id": "fb11317658e87bd3",
        "type": "ui_group",
        "name": "T",
        "tab": "9554a493ec458fae",
        "order": 1,
        "disp": false,
        "width": "20",
        "collapse": false,
        "className": ""
    },
    {
        "id": "40355716c9630ec5",
        "type": "ui_group",
        "name": "設定訂閱(群組)",
        "tab": "d50283c991ec49e9",
        "order": 4,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "fbb2f61316063990",
        "type": "ui_group",
        "name": "推播設定",
        "tab": "d50283c991ec49e9",
        "order": 5,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f369e790a5abd286",
        "type": "mqtt-broker",
        "name": "Hivemq",
        "broker": "broker.hivemq.com",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "9c48fcb187edb1c0",
        "type": "ui_group",
        "name": "Color Light_01",
        "tab": "d0b58772ca9126ea",
        "order": 2,
        "disp": true,
        "width": 3,
        "collapse": false,
        "className": ""
    },
    {
        "id": "d794227a87e56a5c",
        "type": "ui_group",
        "name": "Color Light_02",
        "tab": "d0b58772ca9126ea",
        "order": 3,
        "disp": true,
        "width": 3,
        "collapse": false,
        "className": ""
    },
    {
        "id": "16f25ea74cc357a2",
        "type": "ui_group",
        "name": "Color Light_03",
        "tab": "d0b58772ca9126ea",
        "order": 4,
        "disp": true,
        "width": 3,
        "collapse": false,
        "className": ""
    },
    {
        "id": "172e29420fe3f834",
        "type": "ui_group",
        "name": "Color Light_04",
        "tab": "d0b58772ca9126ea",
        "order": 5,
        "disp": true,
        "width": 3,
        "collapse": false,
        "className": ""
    },
    {
        "id": "85dcb6d14a5fe795",
        "type": "ui_group",
        "name": "Chart",
        "tab": "d0b58772ca9126ea",
        "order": 8,
        "disp": true,
        "width": 18,
        "collapse": false,
        "className": ""
    },
    {
        "id": "6bb75a0b2389a7fa",
        "type": "ui_group",
        "name": "Controller",
        "tab": "d0b58772ca9126ea",
        "order": 1,
        "disp": true,
        "width": 3,
        "collapse": false,
        "className": ""
    },
    {
        "id": "e09a9357081fdf2e",
        "type": "ui_group",
        "name": "Camera",
        "tab": "d0b58772ca9126ea",
        "order": 9,
        "disp": true,
        "width": 8,
        "collapse": false,
        "className": ""
    },
    {
        "id": "3f5dc6e3e9c6b6a5",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "91ac9518a0b9be8c",
        "order": 1,
        "width": 3,
        "height": 1
    },
    {
        "id": "f2745835a6bf741a",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "91ac9518a0b9be8c",
        "order": 2,
        "width": 3,
        "height": 1
    },
    {
        "id": "d334c9398aa8bda2",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "91ac9518a0b9be8c",
        "order": 3,
        "width": 3,
        "height": 1
    },
    {
        "id": "727bbb3e1dc10112",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "91ac9518a0b9be8c",
        "order": 4,
        "width": 3,
        "height": 1
    },
    {
        "id": "dceb7704c1b4d31e",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "91ac9518a0b9be8c",
        "order": 5,
        "width": 3,
        "height": 1
    },
    {
        "id": "5faac2db5e873461",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "29f46230ac4e7e76",
        "order": 1,
        "width": 3,
        "height": 1
    },
    {
        "id": "153b9e2c574263d0",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "29f46230ac4e7e76",
        "order": 2,
        "width": 3,
        "height": 1
    },
    {
        "id": "53e891f65d4235c3",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "29f46230ac4e7e76",
        "order": 3,
        "width": 3,
        "height": 1
    },
    {
        "id": "bf8920c7ee521ca6",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "29f46230ac4e7e76",
        "order": 5,
        "width": 3,
        "height": 1
    },
    {
        "id": "96024bb3bb51b206",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "40355716c9630ec5",
        "order": 1,
        "width": 4,
        "height": 1
    },
    {
        "id": "58b3286831822548",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "40355716c9630ec5",
        "order": 3,
        "width": 4,
        "height": 1
    },
    {
        "id": "720c7604437465a4",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "40355716c9630ec5",
        "order": 5,
        "width": 4,
        "height": 1
    },
    {
        "id": "b366806a06a4a4b6",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "fbb2f61316063990",
        "order": 1,
        "width": 4,
        "height": 1
    },
    {
        "id": "2984a31587483509",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "fbb2f61316063990",
        "order": 3,
        "width": 4,
        "height": 1
    },
    {
        "id": "55eced214388c65f",
        "type": "ui_spacer",
        "z": "2d7ff302c568ee90",
        "name": "spacer",
        "group": "fbb2f61316063990",
        "order": 5,
        "width": 4,
        "height": 1
    },
    {
        "id": "e68ee443af63311f",
        "type": "ui_link",
        "name": "大同大學",
        "link": "https://www.ttu.edu.tw/",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 4
    },
    {
        "id": "d931e1a8dc110a46",
        "type": "ui_link",
        "name": "汯鉅科技",
        "link": "https://www.richlink-tech.com/",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 5
    },
    {
        "id": "3b4d93d2a52be2e5",
        "type": "ui_link",
        "name": " 智慧消防預警推播系統",
        "link": "http://sanmic.ttu.edu.tw/Teach/IoT/IIoT/IIoT.htm",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 10
    },
    {
        "id": "787f0e643913694e",
        "type": "ui_link",
        "name": "Sanmic Studio",
        "link": "http://sanmic.ttu.edu.tw/index.htm",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 6
    },
    {
        "id": "36ee8f40172a59c7",
        "type": "ui_group",
        "name": "Testing",
        "tab": "d0b58772ca9126ea",
        "order": 10,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "f33b0bf6e17108ab",
        "type": "ui_link",
        "name": "作品集",
        "link": "https://slides.com/sanmic/deck-1//fullscreen",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 13
    },
    {
        "id": "b63c41058b7ef7a5",
        "type": "ui_link",
        "name": "About me",
        "link": "https://slides.com/sanmic/deck/fullscreen#/cv",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 14
    },
    {
        "id": "4f73c318b6171488",
        "type": "ui_link",
        "name": "智能烘豆機",
        "link": "https://www.facebook.com/ScienceCoffeeResearchRoom/videos/679387142894765/",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 11
    },
    {
        "id": "e533954147365362",
        "type": "ui_link",
        "name": "智慧交通",
        "link": "https://www.facebook.com/100000054054278/videos/1189222341981287/",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 9
    },
    {
        "id": "1cdb2e76a7214692",
        "type": "ui_link",
        "name": "高空鳥瞰東北角之美",
        "link": "https://youtu.be/uw-2Ex-6UaQ",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 12
    },
    {
        "id": "251693cd2cf32d74",
        "type": "ui_link",
        "name": "智能IOT購物車系統",
        "link": "https://www.youtube.com/watch?v=ASBM4egDnGM",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 7
    },
    {
        "id": "dae01a06b29f170e",
        "type": "ui_link",
        "name": "防走失定位系統",
        "link": "https://www.youtube.com/watch?v=rqYDWtqUbGA",
        "icon": "open_in_browser",
        "target": "newtab",
        "order": 8
    },
    {
        "id": "1c3a4a841a6dae33",
        "type": "linetoken",
        "name": "GroupNotify"
    },
    {
        "id": "f5cb9f737ea0404f",
        "type": "ui_spacer",
        "z": "f85f40305fee5602",
        "name": "spacer",
        "group": "9c48fcb187edb1c0",
        "order": 3,
        "width": 3,
        "height": 1
    },
    {
        "id": "9ef53bf2208a8e1a",
        "type": "ui_spacer",
        "z": "f85f40305fee5602",
        "name": "spacer",
        "group": "16f25ea74cc357a2",
        "order": 3,
        "width": 3,
        "height": 1
    },
    {
        "id": "89bdf927ec16d0dd",
        "type": "ui_group",
        "name": "修改主機設定",
        "tab": "d50283c991ec49e9",
        "order": 6,
        "disp": true,
        "width": "3",
        "collapse": false,
        "className": ""
    },
    {
        "id": "5455dab8220aebed",
        "type": "ui_group",
        "name": "COLOR  BULB",
        "tab": "d0b58772ca9126ea",
        "order": 5,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "648dc09b3836aec9",
        "type": "ui_group",
        "name": "控制",
        "tab": "d0b58772ca9126ea",
        "order": 3,
        "disp": true,
        "width": "4",
        "collapse": false,
        "className": ""
    },
    {
        "id": "c49c01a4cfc11e6a",
        "type": "ui_group",
        "name": "電錶",
        "tab": "d0b58772ca9126ea",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false,
        "className": ""
    },
    {
        "id": "7bcbd43a6a042924",
        "type": "ui_group",
        "name": "修改主機設定",
        "tab": "d50283c991ec49e9",
        "order": 6,
        "disp": true,
        "width": "3",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9cc7837f7d37148e",
        "type": "ui_spacer",
        "z": "8250ec7acc54b0b5",
        "name": "spacer",
        "group": "bb48ce9b02d1c374",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "fe1604ee721c2038",
        "type": "ui_spacer",
        "z": "8250ec7acc54b0b5",
        "name": "spacer",
        "group": "17173f7c1a5033d3",
        "order": 1,
        "width": 1,
        "height": 1
    },
    {
        "id": "5c553dc56a1b2181",
        "type": "ui_spacer",
        "z": "8250ec7acc54b0b5",
        "name": "spacer",
        "group": "17173f7c1a5033d3",
        "order": 3,
        "width": 1,
        "height": 1
    },
    {
        "id": "17173f7c1a5033d3",
        "type": "ui_group",
        "name": "Response",
        "tab": "9554a493ec458fae",
        "order": 4,
        "disp": true,
        "width": 26,
        "collapse": false,
        "className": ""
    },
    {
        "id": "a6c6937c0c826ac4",
        "type": "ui_group",
        "name": "Option",
        "tab": "9554a493ec458fae",
        "order": 2,
        "disp": true,
        "width": 8,
        "collapse": false,
        "className": ""
    },
    {
        "id": "bb48ce9b02d1c374",
        "type": "ui_group",
        "name": "Audio Recognition",
        "tab": "9554a493ec458fae",
        "order": 3,
        "disp": true,
        "width": 10,
        "collapse": false,
        "className": ""
    },
    {
        "id": "0afe5df1247a9d5f",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "Gen Binding State",
        "func": "var msgList = msg.payload.replace(/(\\r\\n|\\n|\\r)/gm, \"\").split(\" \");\nvar topic = msgList[0]\n\nif (topic == \"PROV-MSG\") {\n    if (msgList[1] == \"SUCCESS\"){\n        flow.set(\"uid\", msgList[2])\n        return { topic: \"AKA\" }\n    }\n    else\n        return { topic: \"TIMEOUT\" }\n} \n\nif (topic == \"PBADVCON-MSG\") {\n    if (msgList.length == 2) \n        if (msgList[1] == \"SUCCESS\")\n            return { topic : \"PROV\" }\n        else\n            return { topic: \"TIMEOUT\" }\n}\n\nif (topic == \"AKA-MSG\") {\n    if (msgList.length == 2)\n        if (msgList[1] == \"SUCCESS\")\n            return { topic: \"MAKB\" }\n        else\n            return { topic: \"TIMEOUT\" }\n} \n\nif (topic == \"MAKB-MSG\") {\n    if (msgList.length == 2)\n        if (msgList[1] == \"SUCCESS\")\n            return { topic: \"FINAL\" }\n        else\n            return { topic: \"TIMEOUT\" }\n} \n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 420,
        "wires": [
            [
                "551fdfb456cec5cb"
            ]
        ]
    },
    {
        "id": "d384a975d8bba937",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "PLUG",
        "func": "var uid= msg.uid\nvar ctrl = \"\"\nif (msg.payload == true)\n    ctrl = \"01\"\nelse if (msg.payload == false)\n        ctrl = \"00\"\n\nreturn {cmd :\"MDTS\", uid, payload: \"0x87020001\"+ ctrl};\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 140,
        "wires": [
            [
                "9d6ab0538e8c94d2"
            ]
        ]
    },
    {
        "id": "8b241851ba46e8a8",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "PLUG ON",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "PLUG",
        "payload": "true",
        "payloadType": "bool",
        "x": 160,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "13ba7b77537cf433",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "COLOR BULB ",
        "func": "var color_data = msg.payload;\nvar uid = msg.uid\nvar color=\"\"\n\nif (color_data == \"Red\")\n    color = \"0000FF0000\"\nelse if (color_data == \"Green\")\n    color = \"000000FF00\"\nelse if (color_data == \"Blue\")\n    color = \"00000000FF\"\nelse if (color_data == \"ON\")\n    color = \"00FF000000\"\nelse if (color_data == \"OFF\")\n    color = \"0000000000\"\nelse if (color_data.length === 10 )\n    color = color_data\nelse\n    color = \"0000\" + color_data\nvar RGBCmd = \"0x87010005\" + color \n\nreturn {cmd : \"MDTS\" , uid , payload :RGBCmd};\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 760,
        "y": 220,
        "wires": [
            [
                "9d6ab0538e8c94d2"
            ]
        ]
    },
    {
        "id": "4516c04f308bd0ca",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "Color RED",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "COLOR",
        "payload": "Red",
        "payloadType": "str",
        "x": 160,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "145b82f49810a7aa",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "Discovery Divice",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "timeout",
                "v": "5",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "DISCOVERY",
        "x": 160,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "8839c67959c0c7be",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "Discovery Start & Timeout",
        "func": "global.set(\"DIS_DEVICES_LIST\",[]) // first  create a null Array\n\nif (msg.topic == \"DISCOVERY\"){\n    node.send ({payload:\"AT+DIS 1\"})\n    var dis_timer = setTimeout(() => { node.send({ payload: \"AT+DIS 0\" }) } , msg.timeout*1000)\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 770,
        "y": 300,
        "wires": [
            [
                "020dd99fe95b0542"
            ]
        ]
    },
    {
        "id": "551fdfb456cec5cb",
        "type": "finite-state-machine",
        "z": "149d3c3e2a44a954",
        "name": "",
        "fsmDefinition": "{\"state\":{\"status\":\"IDLE\"},\"transitions\":{\"IDLE\":{\"PBADVCON\":\"PBADVCON\"},\"PBADVCON\":{\"TIMEOUT\":\"FAIL\",\"PROV\":\"PROV\"},\"PROV\":{\"TIMEOUT\":\"FAIL\",\"AKA\":\"AKA\"},\"AKA\":{\"TIMEOUT\":\"FAIL\",\"MAKB\":\"MAKB\"},\"MAKB\":{\"TIMEOUT\":\"FAIL\",\"FINAL\":\"FINAL\"},\"FINAL\":{\"IDLE\":\"IDLE\"},\"FAIL\":{\"IDLE\":\"IDLE\"}}}",
        "sendInitialState": true,
        "sendStateWithoutChange": true,
        "showTransitionErrors": true,
        "x": 850,
        "y": 420,
        "wires": [
            [
                "e709a2296a2d7c90",
                "f811dc4e1ecdbe4f"
            ]
        ]
    },
    {
        "id": "e709a2296a2d7c90",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "Binding flow",
        "func": "var state = msg.payload.status\nvar uid = flow.get(\"uid\")\nvar uuid = flow.get (\"uuid\")\n\nif (state == \"PBADVCON\"){\n    // start prov\n    global.set(\"proving\", true)\n    return [{payload: \"AT+\"+ state+ \" \" + uuid}]\n}\nif (state == \"PROV\") {\n    return [{ payload: \"AT+\"+ state }]\n}\nif (state == \"AKA\"){\n    var uid = flow.get(\"uid\")\n    return [{payload: \"AT+\"+ state+ \" \" + uid + \" 0 0\" }]\n}\nif (state == \"MAKB\"){\n    var uid = flow.get(\"uid\")\n    return [{ payload: \"AT+\"+ state + \" \" + uid + \" 0 x4005D 0\" }]\n}\n\nif (state == \"FINAL\"){\n    var uid = flow.get(\"uid\")\n    var macAddr = flow.get (\"macAddr\")\n    var mac = macAddr.replace(/(..)(?=..)/g, '$1:');\n    global.set(\"proving\", false)\n    return [null, {topic :\"BINDING\" ,payload : {uid , mac }}]\n}\n\nif (state == \"FAIL\"){\n    global.set(\"proving\", false)\n    return [null,null,{payload:\"FAIL\"}]\n}\n\n",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1090,
        "y": 420,
        "wires": [
            [
                "020dd99fe95b0542"
            ],
            [
                "e25635c9a88b9a08"
            ],
            []
        ]
    },
    {
        "id": "f811dc4e1ecdbe4f",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "Go IDLE",
        "func": "var state = msg.payload.status\n\nif (state == \"FINAL\") {\n    return{topic : \"IDLE\"}\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 500,
        "wires": [
            [
                "551fdfb456cec5cb"
            ]
        ]
    },
    {
        "id": "9d6ab0538e8c94d2",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "ATCMD",
        "func": "\nif (msg.cmd == \"DIS\") {\n    return { payload: \"AT+\" + msg.cmd + \" \" + msg.payload }\n}\n\nif (msg.cmd == \"NR\") {\n    node.warn(\"NR \" + msg.uid);\n    if (msg.uid != \"\") {\n        return { payload: \"AT+\" + msg.cmd + \" \" + msg.uid }\n    }\n    node.warn(\"my warning__\" + msg.uid );\n    return { payload: \"AT+\" + msg.cmd }\n}\n\nif (msg.cmd == \"SUB\") {\n    return {payload : \"AT+MSAA \" + msg.uid + ' 0 0x4005D ' + msg.sub}\n}\nif (msg.cmd == \"PUB\") {\n    return { payload: \"AT+MPAS \" + msg.uid + ' 0 0x4005D ' + msg.pub + ' 0' }\n}\nif (msg.cmd == \"MDTS\") {\n    if (msg.uid) {\n        return { payload: \"AT+\" +  msg.cmd + \" \" + msg.uid + \" 0 0 0 \" + msg.payload }\n    }\n}\nreturn { payload: \"AT+\" + msg.cmd }",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 100,
        "wires": [
            [
                "020dd99fe95b0542"
            ]
        ]
    },
    {
        "id": "b924bbb7ee7fb48b",
        "type": "switch",
        "z": "149d3c3e2a44a954",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ATCMD",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "PLUG",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "FAN",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "COLOR",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "SMARTBOX",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "DISCOVERY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "BINDING",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "UART",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 8,
        "x": 470,
        "y": 180,
        "wires": [
            [
                "9d6ab0538e8c94d2"
            ],
            [
                "d384a975d8bba937"
            ],
            [
                "0440588417b69a7b"
            ],
            [
                "13ba7b77537cf433"
            ],
            [
                "86287f92c9e25cbd"
            ],
            [
                "8839c67959c0c7be"
            ],
            [
                "be241bfea8605c49"
            ],
            [
                "0afe5df1247a9d5f",
                "4c585af690d31b08",
                "fcf7111b19b84bf1",
                "1049678111b0d6a5",
                "a7b576f6c440a5ec"
            ]
        ]
    },
    {
        "id": "e2d48f33ed13c765",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "NODE RESET ",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "cmd",
                "v": "NR",
                "vt": "str"
            },
            {
                "p": "payload"
            },
            {
                "p": "uid",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "ATCMD",
        "payload": "",
        "payloadType": "str",
        "x": 160,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "94b6dddfa5d4a372",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "PLUG OFF",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "PLUG",
        "payload": "false",
        "payloadType": "bool",
        "x": 160,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "22c9d455772ddc6e",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "bind uuid",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "mac",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "BINDING",
        "payload": "123E4567E89B12D3A456740200003A5D",
        "payloadType": "str",
        "x": 140,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "be241bfea8605c49",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "Start FSM",
        "func": "\nflow.set(\"uuid\" , msg.payload)\nflow.set(\"macAddr\",msg.mac)\nnode.warn(msg.mac);\nreturn {topic : \"PBADVCON\" };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 340,
        "wires": [
            [
                "551fdfb456cec5cb"
            ]
        ]
    },
    {
        "id": "4c585af690d31b08",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "Get DIS DeviceList",
        "func": "var msgList = msg.payload.replace(/(\\r\\n|\\n|\\r)/gm, \"\").split(\" \");\nvar topic = msgList[0]\nvar devices_list = global.get(\"DIS_DEVICES_LIST\")\n\nif (topic == \"DIS-MSG\") {\n    if (msgList.length > 2){\n        if (devices_list.some(obj => obj.mac === msgList[1]))\n            return\n        else {\n            devices_list.push ({mac:msgList[1], uuid:msgList[3]})\n            global.set(\"DIS_DEVICES_LIST\" , devices_list)\n            return { topic: \"DISCOVERY\", payload: devices_list }\n        }\n    }\n    \n}\n// return msg;\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 520,
        "wires": [
            [
                "e25635c9a88b9a08"
            ]
        ]
    },
    {
        "id": "1049678111b0d6a5",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "MDTG",
        "func": "var msgList = msg.payload.replace(/(\\r\\n|\\n|\\r)/gm, \"\").split(\" \");\nvar topic = msgList[0]\nvar check_list = [\"MDTG-MSG\"]\n\nif (check_list.includes (topic)) {\n    return {payload : msgList}\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "fcf7111b19b84bf1",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "SYS MSG",
        "func": "var msgList = msg.payload.replace(/(\\r\\n|\\n|\\r)/gm, \"\").split(\" \");\nvar topic = msgList[0]\nvar check_list = [\"DIS-MSG\" ,\"NR-MSG\" ,\"SYS-MSG\",\"NL-MSG\" , \"ADDR-MSG\"]\n\nif (check_list.includes (topic)) {\n    return {payload : msgList}\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 590,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "86287f92c9e25cbd",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "Smart Box",
        "func": "var uid = msg.uid\n\nvar baudrate = 9600\nvar baudRate_dict = { 2400: \"00\", 4800: \"01\", 9600: \"02\" }\nvar SetbaudrateAddr = '80'\nvar HEADER = '8276'\nvar RTU_CMD = '02'\nvar SET_CMD = '01'\nvar GET_CMD = \"00\"\nvar SENSOR_CMD = \"03\"\nvar MemAddr = '00'\nvar DataLength = '01'\n\nif (msg.channel == \"RTU\"){\n    var Cmd = \"AT+MDTS \" + uid + \" 0 0 0 0x\" + HEADER + RTU_CMD + msg.payload;\n    return { payload: Cmd };\n}\nif (msg.channel == \"SENSOR\") {\n    var Cmd = \"AT+MDTS \" + uid + \" 0 0 0 0x\" + HEADER + SENSOR_CMD + MemAddr;\n    return { payload: Cmd };\n}\n\nif (msg.channel == \"DO\") {\n    var ctrl = \"\"\n    if (msg.payload == true)\n        ctrl = \"01\"\n    else \n        ctrl = \"00\"\n\n    var Cmd = \"AT+MDTS \" + uid + \" 0 0 0 0x\" + HEADER + SET_CMD + MemAddr + ctrl;\n    return { payload: Cmd };\n}\n//Set DI read\nif (msg.channel == \"DI\") {\n    var Cmd = \"AT+MDTS \" + uid + \" 0 0 0 0x\" + HEADER + GET_CMD + MemAddr;\n    return { payload: Cmd };\n}\n\nif (msg.channel == \"SETRTUBUARD\") {\n    baudrate = msg.payload\n    var Cmd = \"AT+MDTS \" + uid + \" 0 0 0 0x\" + HEADER + SET_CMD + SetbaudrateAddr + baudRate_dict[baudrate];\n    return { payload: Cmd };\n}",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 750,
        "y": 260,
        "wires": [
            [
                "020dd99fe95b0542"
            ]
        ]
    },
    {
        "id": "285ad663439cf0c1",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "SnartBoxRTU",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            },
            {
                "p": "cnannel",
                "v": "RTU",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "",
        "payloadType": "str",
        "x": 150,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "4c5fc4bdf731b55f",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "SnartBoxDI_read",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            },
            {
                "p": "cnannel",
                "v": "DI",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "",
        "payloadType": "str",
        "x": 140,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "f4b0fd359c8facf4",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "SnartBoxDO ON",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            },
            {
                "p": "cnannel",
                "v": "DO",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "true",
        "payloadType": "bool",
        "x": 140,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "a5a4eabdb4ae0e40",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "SnartBoxDO OFF",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            },
            {
                "p": "cnannel",
                "v": "DO",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "false",
        "payloadType": "bool",
        "x": 140,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "e3c253cbf16ef731",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "SnartBoxSetBuard",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            },
            {
                "p": "cnannel",
                "v": "SETRTUBUARD",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "4800",
        "payloadType": "num",
        "x": 150,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "0440588417b69a7b",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "FAN",
        "func": "var command = msg.payload;\n\nvar data = \"\"\nif (command == \"POWER ON\"){\n    data = \"0x870400020101\";\n\n}\nif (command == \"POWER OFF\") {\n    data =\"0x870400020100\" ;\n}\nif (command == \"WAVE ON\") {\n    data = \"0x870400020501\" ;\n}\nif (command == \"WAVE OFF\") {\n    data = \"0x870400020500\" ;\n}\nif (command == \"SPEED\") {\n    var speedhex = parseInt(msg.speed).toString(16).padStart(2, \"0\")\n    data = \"0x8704000207\" + speedhex ;\n\n}\n\nreturn {cmd : \"MDTS\" , uid : msg.uid , payload : data };\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 180,
        "wires": [
            [
                "9d6ab0538e8c94d2"
            ]
        ]
    },
    {
        "id": "7c694ef16308bbee",
        "type": "inject",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "FAN",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "FAN",
        "payload": "POWER ON",
        "payloadType": "str",
        "x": 150,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "75c50b9957c6c830",
        "type": "comment",
        "z": "149d3c3e2a44a954",
        "g": "f51b9b50909a6cf7",
        "name": "how to send cmd",
        "info": "topic : ATCMD / PLUG/ FAN /COLOR /SMARTBOX /BINDING\n\nATCMD\n 必須\n    cmd : ATCMD 字串 ex .\"NL\"\n 可選\n    uid : 字串 ex. \"0x0100\n    payload : 字串 \"870210\"\n\nPLUG 插座\n必須\n    uid 字串 ex. \"0x0100\n    payload : boolen \n\nCOLOR : 彩色燈泡\n必須\n    uid :\n    payload : \n        \"Red\", \"Green\", \"Blue\"\n        \"RRGGBB\" HexCode . ex. FF0000 (紅色)\nFAN : 風扇\n必須\n    uid \n    payload : \"POWER ON\" , \"POWER OFF\" , \"WAVE ON\" , \"WAVE OFF\" , \"SPEED\"\n可選\n    speed : 1-24 (只有 payload = \"SPEED\" 有效)\n\nSMARTBOX\n必須\n    uid\n    channel : DI /DO /RTU / SETBUARD\n    payload :\n        channel = RTU , To MODBUS Devive Data Hex字串\n        channel = DO , boolen\n        channel = DI , 不須\n        channel = SETBUARD , 4800 /9600/115200\nBINDING\n必須\n    uuid\n            \n\n",
        "x": 160,
        "y": 60,
        "wires": []
    },
    {
        "id": "a7b576f6c440a5ec",
        "type": "function",
        "z": "149d3c3e2a44a954",
        "name": "MDTS",
        "func": "var msgList = msg.payload.replace(/(\\r\\n|\\n|\\r)/gm, \"\").split(\" \");\nvar topic = msgList[0]\nvar check_list = [\"MDTS-MSG\"]\n\nif (check_list.includes (topic)) {\n    return {payload : msgList}\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 570,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "9d6848c3cf5e4b28",
        "type": "link out",
        "z": "298c337f544e92d5",
        "g": "1e4bb4113e263703",
        "name": "link out 3",
        "mode": "link",
        "links": [],
        "x": 1015,
        "y": 720,
        "wires": [],
        "icon": "font-awesome/fa-wifi"
    },
    {
        "id": "4948036bf77d07f8",
        "type": "inject",
        "z": "298c337f544e92d5",
        "g": "1e4bb4113e263703",
        "name": "Send Trigger RS485 溫濕度 Agent 0x0111",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "AT+MDTS 0x0111 0 0 0 0x010300000002C40B",
        "payloadType": "str",
        "x": 720,
        "y": 740,
        "wires": [
            [
                "9d6848c3cf5e4b28"
            ]
        ],
        "info": "AT+MDTS  targetUID 0 0 8702000101 --> ON\r\nAT+MDTS  targetUID 0 0 8702000100 --> OFF"
    },
    {
        "id": "28a81f92752b5b10",
        "type": "inject",
        "z": "298c337f544e92d5",
        "g": "1e4bb4113e263703",
        "name": "Send Trigger RS485 IO  Agent 0x0102",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "AT+MDTS 0x0102 0 0 0 0x0101001F0001CC0C",
        "payloadType": "str",
        "x": 750,
        "y": 700,
        "wires": [
            [
                "9d6848c3cf5e4b28"
            ]
        ],
        "info": "AT+MDTS  targetUID 0 0 8702000101 --> ON\r\nAT+MDTS  targetUID 0 0 8702000100 --> OFF"
    },
    {
        "id": "2681340dcd6e7823",
        "type": "inject",
        "z": "298c337f544e92d5",
        "g": "1e4bb4113e263703",
        "name": "Get 0x102 DI Status",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "AT+MDTS 0x0102 0 0 0 0x827681",
        "payloadType": "str",
        "x": 740,
        "y": 640,
        "wires": [
            [
                "9d6848c3cf5e4b28"
            ]
        ],
        "info": "AT+MDTS  targetUID 0 0 8702000101 --> ON\r\nAT+MDTS  targetUID 0 0 8702000100 --> OFF"
    },
    {
        "id": "486a5dbea3d75a02",
        "type": "comment",
        "z": "298c337f544e92d5",
        "g": "1e4bb4113e263703",
        "name": "Sanmic Note",
        "info": "SOP:\nStep 01: Get ID\nStep 02:\nStep 03:\nStep 04:\nStep 05: Verify the result",
        "x": 1290,
        "y": 580,
        "wires": []
    },
    {
        "id": "a1b52ca030f104ee",
        "type": "subflow:149d3c3e2a44a954",
        "z": "298c337f544e92d5",
        "name": "RL62M02_MESH_V1",
        "x": 1000,
        "y": 260,
        "wires": [
            [
                "e7877898b5565c6e",
                "37f61c2a0737d62a"
            ],
            [
                "2708002fe7df1c7f"
            ],
            [
                "c8925624673cbbaa",
                "a4d9c7ac0ac547cb",
                "21fdaffa2949d8ae",
                "f2167d46b2d1a557"
            ],
            [],
            [
                "5a4795e09dd07303",
                "0a30c585e7a8fd19"
            ]
        ],
        "inputLabels": [
            "Mesh cmd"
        ],
        "outputLabels": [
            "Binding Info",
            "Device Msg",
            "Sys Msg",
            "",
            ""
        ]
    },
    {
        "id": "01dbfa9bc55a7191",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "Discovery Divice",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "timeout",
                "v": "5",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "DISCOVERY",
        "x": 700,
        "y": 320,
        "wires": [
            [
                "a1b52ca030f104ee"
            ]
        ]
    },
    {
        "id": "d13cc22b7de62d3d",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "NODE RESET uid",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "cmd",
                "v": "NR",
                "vt": "str"
            },
            {
                "p": "payload"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "ATCMD",
        "payload": "",
        "payloadType": "str",
        "x": 690,
        "y": 360,
        "wires": [
            [
                "a1b52ca030f104ee"
            ]
        ]
    },
    {
        "id": "e7877898b5565c6e",
        "type": "debug",
        "z": "298c337f544e92d5",
        "name": "debug 56",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1300,
        "y": 100,
        "wires": []
    },
    {
        "id": "c8925624673cbbaa",
        "type": "debug",
        "z": "298c337f544e92d5",
        "name": "SYS-MSG",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 180,
        "wires": []
    },
    {
        "id": "da680875daee27f5",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "NODE RESET ALL",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "cmd",
                "v": "NR",
                "vt": "str"
            },
            {
                "p": "payload"
            },
            {
                "p": "uid",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "ATCMD",
        "payload": "",
        "payloadType": "str",
        "x": 690,
        "y": 400,
        "wires": [
            [
                "a1b52ca030f104ee"
            ]
        ]
    },
    {
        "id": "d9717fc33326853d",
        "type": "link in",
        "z": "298c337f544e92d5",
        "name": "RL62M MESH IN",
        "links": [
            "cccc0ef474ab1a04",
            "df8e445e85cee804"
        ],
        "x": 765,
        "y": 100,
        "wires": [
            [
                "a1b52ca030f104ee"
            ]
        ]
    },
    {
        "id": "37f61c2a0737d62a",
        "type": "link out",
        "z": "298c337f544e92d5",
        "name": "To DISCOVERY",
        "mode": "link",
        "links": [
            "99de58fccf0a4590"
        ],
        "x": 1275,
        "y": 60,
        "wires": []
    },
    {
        "id": "a4d9c7ac0ac547cb",
        "type": "function",
        "z": "298c337f544e92d5",
        "name": "Remove Device ",
        "func": "\nif ((msg.payload[0] == \"NR-MSG\") && (msg.payload[1] == \"SUCCESS\")) {\n    var jsonFile = global.get(\"jsonFile\")\n    var uid = msg.payload[2]\n    if (uid == \"0x0000\")\n        jsonFile.devices = []\n    else\n        jsonFile.devices = jsonFile.devices.filter(function (item) {\n            return item.uid != uid\n    });\n\n    global.set(\"jsonFile\", jsonFile)\n    return { payload: jsonFile }\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 220,
        "wires": [
            [
                "f94b99bfec9035ba"
            ]
        ]
    },
    {
        "id": "f94b99bfec9035ba",
        "type": "link out",
        "z": "298c337f544e92d5",
        "name": "to Write file",
        "mode": "link",
        "links": [
            "da70d3343c11c582"
        ],
        "x": 1495,
        "y": 220,
        "wires": []
    },
    {
        "id": "9b534c479f40c528",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "GetProvMac",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "cmd",
                "v": "ADDR",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "ATCMD",
        "x": 670,
        "y": 220,
        "wires": [
            [
                "a1b52ca030f104ee"
            ]
        ]
    },
    {
        "id": "21fdaffa2949d8ae",
        "type": "function",
        "z": "298c337f544e92d5",
        "name": "Prov ADDR",
        "func": "var jsonFile = global.get(\"jsonFile\");\nvar gwMac = jsonFile.gwMac;\nvar mac = msg.payload[1]\n\nmac = mac.replace(/(..)(?=..)/g, '$1:');\n\nif (msg.payload[0] ==\"ADDR-MSG\"){\n    if (gwMac ==\"\") {\n        jsonFile.gwMac = mac;\n        global.set('jsonFile', jsonFile)\n        return { payload: jsonFile };\n        //save file\n    }\n    if (gwMac == mac)\n        node.warn(\"Prov Mac == json file\");\n    else\n        node.warn(\"USB MESH ADDRESS Error\");\n}\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1330,
        "y": 260,
        "wires": [
            [
                "f94b99bfec9035ba"
            ]
        ]
    },
    {
        "id": "f2167d46b2d1a557",
        "type": "function",
        "z": "298c337f544e92d5",
        "name": "check on/off line",
        "func": "var jsonFile = global.get(\"jsonFile\")\nif ( msg.payload[0] == \"NL-MSG\"){\n\n    var uid = msg.payload[2]\n\n    var state = msg.payload[4]\n\n    jsonFile.devices.forEach(function (device) {\n        if (device.uid == uid) {\n            var pre_state = parseInt(device.state);\n            if (pre_state != parseInt(state)){\n                device.state = parseInt(state);\n                global.set(\"jsonFile\", jsonFile); \n                node.send({\n                    devName: device.devName,\n                    devPosition: device.devPosition,\n                    devMac: device.devMac,\n                    devType: device.devType,\n                    state : device.state,\n                    uid\n                })  \n            }        \n        }\n    });\n     \n}\nnode.done()",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 300,
        "wires": [
            [
                "0e11c2ad49d94ad2",
                "2af1cbbbe2a22569"
            ]
        ]
    },
    {
        "id": "d5eef85058fad4c8",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "Get All Node State",
        "props": [
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "cmd",
                "v": "NL",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "ATCMD",
        "x": 450,
        "y": 280,
        "wires": [
            [
                "d97b8fcf523a8dbf"
            ]
        ]
    },
    {
        "id": "2708002fe7df1c7f",
        "type": "link out",
        "z": "298c337f544e92d5",
        "name": "To MDTG ( MESH 裝置回傳)",
        "mode": "link",
        "links": [],
        "x": 1285,
        "y": 140,
        "wires": []
    },
    {
        "id": "0e11c2ad49d94ad2",
        "type": "debug",
        "z": "298c337f544e92d5",
        "name": "debug 62",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1520,
        "y": 320,
        "wires": []
    },
    {
        "id": "b2b72a92e4d8c0d3",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "Power On Onece",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "0.1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 930,
        "y": 440,
        "wires": [
            [
                "63389520e2e51e67"
            ]
        ]
    },
    {
        "id": "63389520e2e51e67",
        "type": "function",
        "z": "298c337f544e92d5",
        "name": "init_global",
        "func": "var prove_ing = global.get(\"proving\")|| false;\nglobal.set(\"proving\",prove_ing)\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "d97b8fcf523a8dbf",
        "type": "function",
        "z": "298c337f544e92d5",
        "name": "Proving Gating",
        "func": "var prove_ing = global.get(\"proving\") || false;\n\nif (prove_ing == false){\n    node.status({ fill: \"green\", shape: \"ring\", text: \"gate on\" });\n    return msg;\n}\nnode.status({ fill: \"red\", shape: \"ring\", text: \"gate off\" });",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 280,
        "wires": [
            [
                "a1b52ca030f104ee"
            ]
        ]
    },
    {
        "id": "2af1cbbbe2a22569",
        "type": "link out",
        "z": "298c337f544e92d5",
        "name": "To MQTT Report online State",
        "mode": "link",
        "links": [],
        "x": 1495,
        "y": 280,
        "wires": []
    },
    {
        "id": "81e6d05af2c8ebd4",
        "type": "serial in",
        "z": "298c337f544e92d5",
        "name": "",
        "serial": "7a5d15765d1785d0",
        "x": 490,
        "y": 180,
        "wires": [
            [
                "9a8ecc28923fdb58",
                "207c529343cad702"
            ]
        ]
    },
    {
        "id": "5a4795e09dd07303",
        "type": "serial out",
        "z": "298c337f544e92d5",
        "name": "",
        "serial": "7a5d15765d1785d0",
        "x": 1330,
        "y": 400,
        "wires": []
    },
    {
        "id": "9a8ecc28923fdb58",
        "type": "change",
        "z": "298c337f544e92d5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "UART",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 180,
        "wires": [
            [
                "a1b52ca030f104ee"
            ]
        ]
    },
    {
        "id": "207c529343cad702",
        "type": "debug",
        "z": "298c337f544e92d5",
        "name": "Serial IN",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 140,
        "wires": []
    },
    {
        "id": "0a30c585e7a8fd19",
        "type": "debug",
        "z": "298c337f544e92d5",
        "name": "Serial OUT",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1330,
        "y": 360,
        "wires": []
    },
    {
        "id": "e7ca81db2baacf9e",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "PLUG ON",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "PLUG",
        "payload": "true",
        "payloadType": "bool",
        "x": 180,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "669d2fa408f54297",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "Color RED",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0102",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "COLOR",
        "payload": "0000FF0000",
        "payloadType": "str",
        "x": 180,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "eea9b23bb93a6696",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "PLUG OFF",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "PLUG",
        "payload": "false",
        "payloadType": "bool",
        "x": 180,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "80ad06a69dcc7f78",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "bind uuid",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "mac",
                "v": "",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "BINDING",
        "payload": "123E4567E89B12D3A4567257000010CE",
        "payloadType": "str",
        "x": 180,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "2eb99aadb45e35cf",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "Color any",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0101",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "COLOR",
        "payload": "5F5F00",
        "payloadType": "str",
        "x": 180,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "5d96a1489995d3b6",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "Color GREEN",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0102",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "COLOR",
        "payload": "Green",
        "payloadType": "str",
        "x": 170,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "07a5a4c3b527471c",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "SnartBoxRTU",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            },
            {
                "p": "channel",
                "v": "RTU",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "",
        "payloadType": "str",
        "x": 170,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "ffaf5e4e7a05c59e",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "SnartBoxDI_read",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0104",
                "vt": "str"
            },
            {
                "p": "channel",
                "v": "DI",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "",
        "payloadType": "str",
        "x": 160,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "5eccc8161bf604d1",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "SnartBoxDO ON",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0103",
                "vt": "str"
            },
            {
                "p": "channel",
                "v": "DO",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "true",
        "payloadType": "bool",
        "x": 160,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "a1a3f02b6b839c62",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "SnartBoxDO OFF",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0103",
                "vt": "str"
            },
            {
                "p": "channel",
                "v": "DO",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "false",
        "payloadType": "bool",
        "x": 160,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "9cee3fb356d59103",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "SnartBoxSetBuard",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            },
            {
                "p": "channel",
                "v": "SETRTUBUARD",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "4800",
        "payloadType": "num",
        "x": 150,
        "y": 480,
        "wires": [
            []
        ]
    },
    {
        "id": "2b86e45486816025",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "FAN",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0100",
                "vt": "str"
            },
            {
                "p": "speed",
                "v": "5",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "FAN",
        "payload": "SPEED",
        "payloadType": "str",
        "x": 190,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "258a33966e08b242",
        "type": "inject",
        "z": "298c337f544e92d5",
        "name": "SnartBoxSensor_read",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            },
            {
                "p": "uid",
                "v": "0x0103",
                "vt": "str"
            },
            {
                "p": "channel",
                "v": "SENSOR",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "SMARTBOX",
        "payload": "",
        "payloadType": "str",
        "x": 140,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "02a756487bf4dfed",
        "type": "comment",
        "z": "298c337f544e92d5",
        "name": "Proving Gating",
        "info": "因為 處理  AT+NL 會影響到綁定\n故 使用此 Node 判斷 global var 是否處於綁定過程\n去遮斷 AT+NL ",
        "x": 480,
        "y": 240,
        "wires": [],
        "icon": "node-red/alert.svg"
    },
    {
        "id": "cbc8c7dde36554ed",
        "type": "ui_gauge",
        "z": "f85f40305fee5602",
        "g": "eff4a73a11ad3f9f",
        "name": "TemperGuage",
        "group": "677a19ebf2be3c4c",
        "order": 2,
        "width": 4,
        "height": 3,
        "gtype": "gage",
        "title": "Temperature",
        "label": "度",
        "format": "{{value}}",
        "min": "-10",
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 540,
        "y": 980,
        "wires": []
    },
    {
        "id": "e10a6df36558e7e2",
        "type": "ui_gauge",
        "z": "f85f40305fee5602",
        "g": "eff4a73a11ad3f9f",
        "name": "HumidityGuage",
        "group": "677a19ebf2be3c4c",
        "order": 3,
        "width": 4,
        "height": 3,
        "gtype": "gage",
        "title": "Humidity",
        "label": "%",
        "format": "{{value}}",
        "min": "0",
        "max": "100",
        "colors": [
            "#00b500",
            "#e6e600",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "diff": false,
        "className": "",
        "x": 540,
        "y": 940,
        "wires": []
    },
    {
        "id": "cc85d6ea32c2242b",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "c622f576c96b1f4f",
        "name": "",
        "group": "8072c1412b794784",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "FAN ON",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "ON",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 160,
        "y": 480,
        "wires": [
            [
                "f2f79bbf868bdfd9"
            ]
        ]
    },
    {
        "id": "6e4afd81514ba967",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "c622f576c96b1f4f",
        "name": "",
        "group": "8072c1412b794784",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "FAN OFF",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "OFF",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 160,
        "y": 520,
        "wires": [
            [
                "f2f79bbf868bdfd9"
            ]
        ]
    },
    {
        "id": "91bdbb4a5b75f72f",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "c622f576c96b1f4f",
        "name": "",
        "group": "8072c1412b794784",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "FAN WAVE ON",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "WAVEON",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 140,
        "y": 560,
        "wires": [
            [
                "f2f79bbf868bdfd9"
            ]
        ]
    },
    {
        "id": "df8e445e85cee804",
        "type": "link out",
        "z": "f85f40305fee5602",
        "name": "To RL62M MESH IN",
        "mode": "link",
        "links": [
            "d9717fc33326853d"
        ],
        "x": 1415,
        "y": 1020,
        "wires": [],
        "icon": "font-awesome/fa-wifi"
    },
    {
        "id": "f2f79bbf868bdfd9",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "c622f576c96b1f4f",
        "name": "FANStatusToATcmd",
        "func": "if (msg.payload == \"ON\")\n    return { payload: \"AT+MDTS 0x0105 0 0 0 0x870400020101\"};\nelse if (msg.payload == \"OFF\")\n    return { payload: \"AT+MDTS 0x0105 0 0 0 0x870400020100\"};\nelse if (msg.payload == \"WAVEON\")\n    return { payload: \"AT+MDTS 0x0105 0 0 0 0x870400020501\"};\nelse if (msg.payload == \"WAVEOFF\")\n    return { payload: \"AT+MDTS 0x0105 0 0 0 0x870400020500\"};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 530,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "bea7f99d065ec6e8",
        "type": "link in",
        "z": "f85f40305fee5602",
        "g": "eff4a73a11ad3f9f",
        "name": "WebGUI",
        "links": [],
        "x": 175,
        "y": 960,
        "wires": [
            [
                "c053997cd49abc10"
            ]
        ]
    },
    {
        "id": "c21ba7c545858ebb",
        "type": "function",
        "z": "f85f40305fee5602",
        "name": "hexToBytes",
        "func": "function hexToBytes(hex) {\n    let bytes = [];\n\n    for (let i = 0; i < hex.length; i += 2) {\n        let byte = parseInt(hex.substr(i, 2), 16);\n        bytes.push(byte);\n    }\n\n    return bytes;\n}\nmsg.payload = hexToBytes (msg.payload)\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 110,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "381c4a94ec29c762",
        "type": "function",
        "z": "f85f40305fee5602",
        "name": "bytesToHex",
        "func": "function bytesToHex(bytes) {\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex = hex + bytes[i].toString(16);\n    }\n    return hex.toUpperCase();\n}\nmsg.payload = bytesToHex (msg.payload)\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 110,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "0c3abfc961a4f85b",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "c622f576c96b1f4f",
        "name": "",
        "group": "8072c1412b794784",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "FAN WAVE OFF",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "WAVEOFF",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 140,
        "y": 600,
        "wires": [
            [
                "f2f79bbf868bdfd9"
            ]
        ]
    },
    {
        "id": "9d7a695e62095720",
        "type": "ui_slider",
        "z": "f85f40305fee5602",
        "g": "c622f576c96b1f4f",
        "name": "speed",
        "label": "FAN SPEED",
        "tooltip": "",
        "group": "8072c1412b794784",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "1",
        "max": "24",
        "step": 1,
        "className": "",
        "x": 170,
        "y": 640,
        "wires": [
            [
                "bf284062dce0734b"
            ]
        ]
    },
    {
        "id": "bf284062dce0734b",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "c622f576c96b1f4f",
        "name": "FANSpeedToATcmd",
        "func": "var speedhex = parseInt(msg.payload).toString(16).padStart(2,\"0\")\nvar payload = \"AT+MDTS 0x0105 0 0 0 0x8704000207\"+speedhex;\nreturn { payload: payload};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "8ff2ddc8782f84c9",
        "type": "switch",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "判斷溫度",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lte",
                "v": "temper_low",
                "vt": "flow"
            },
            {
                "t": "gte",
                "v": "temper_high",
                "vt": "flow"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1600,
        "y": 160,
        "wires": [
            [
                "cbe87b26c5ee6189"
            ],
            [
                "fb625c94df0c9286",
                "d3a552fae4ebe761"
            ]
        ]
    },
    {
        "id": "2675b5bd95aacd55",
        "type": "ui_audio",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "Temper Audio",
        "group": "677a19ebf2be3c4c",
        "voice": "Microsoft Mark - English (United States)",
        "always": true,
        "x": 2040,
        "y": 280,
        "wires": []
    },
    {
        "id": "d3a552fae4ebe761",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "set Temper High voide",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Temperature High Start Fan",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1840,
        "y": 220,
        "wires": [
            [
                "2675b5bd95aacd55"
            ]
        ]
    },
    {
        "id": "f0f937d270eec204",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "98bbe5cf9c49f8f7",
        "name": "RGB 0x103 Color",
        "func": "if (msg.payload == \"Red\")\n    var RGBCmd = \"AT+MDTS 0x0103 0 0 0 0x870100050000\" + \"FF0000\"\nelse if (msg.payload == \"Blue\")\n    var RGBCmd = \"AT+MDTS 0x0103 0 0 0 0x870100050000\" + \"0000FF\"\nelse if (msg.payload == \"Green\")\n    var RGBCmd = \"AT+MDTS 0x0103 0 0 0 0x870100050000\" + \"00FF00\"\nelse if (msg.payload == \"OFF\")\n    var RGBCmd = \"AT+MDTS 0x0103 0 0 0 0x870100050000\" + \"000000\"\nreturn {payload :RGBCmd};\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2670,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "c7be7a64ce8d81e9",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "98bbe5cf9c49f8f7",
        "name": "Plug 0x101 ON/OFF",
        "func": "if (msg.payload == \"OFF\")\n    return {payload :\"AT+MDTS \"+ \"0x0101\" + \" 0 0 0 0x8702000100\"};\nelse \n    return {payload: \"AT+MDTS \"+ \"0x0101\" + \" 0 0 0 0x8702000101\"};\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2660,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "68be2fee3aae9c69",
        "type": "delay",
        "z": "f85f40305fee5602",
        "g": "98bbe5cf9c49f8f7",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2410,
        "y": 220,
        "wires": [
            [
                "c7be7a64ce8d81e9"
            ]
        ]
    },
    {
        "id": "632eae5290ac01f3",
        "type": "switch",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "判斷 Humidity",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "lte",
                "v": "65",
                "vt": "num"
            },
            {
                "t": "gte",
                "v": "70",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1600,
        "y": 280,
        "wires": [
            [
                "6cda7b1122bc4e15"
            ],
            [
                "041d11ec84815ac9",
                "1c9befdee5638ea4"
            ]
        ]
    },
    {
        "id": "041d11ec84815ac9",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "set humidity High voice",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Humidity High Start Fan",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1810,
        "y": 340,
        "wires": [
            [
                "2675b5bd95aacd55"
            ]
        ]
    },
    {
        "id": "1c9befdee5638ea4",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "set humidity high action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Red",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1810,
        "y": 400,
        "wires": [
            [
                "2f5ce9ec230a945c"
            ]
        ]
    },
    {
        "id": "6cda7b1122bc4e15",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "set humidity low action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1820,
        "y": 280,
        "wires": [
            [
                "2f5ce9ec230a945c"
            ]
        ]
    },
    {
        "id": "cbe87b26c5ee6189",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "set Temper low action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1840,
        "y": 140,
        "wires": [
            [
                "2f5ce9ec230a945c"
            ]
        ]
    },
    {
        "id": "fb625c94df0c9286",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "set Temper high action",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "Blue",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1840,
        "y": 180,
        "wires": [
            [
                "2f5ce9ec230a945c"
            ]
        ]
    },
    {
        "id": "2f5ce9ec230a945c",
        "type": "link out",
        "z": "f85f40305fee5602",
        "g": "227f2870c3485f4b",
        "name": "To RGB/Plug2 CTRL",
        "mode": "link",
        "links": [
            "e57650c0b3a34bd0"
        ],
        "x": 2095,
        "y": 140,
        "wires": []
    },
    {
        "id": "e57650c0b3a34bd0",
        "type": "link in",
        "z": "f85f40305fee5602",
        "g": "98bbe5cf9c49f8f7",
        "name": "CTRL RGB/Plug2",
        "links": [
            "2f5ce9ec230a945c"
        ],
        "x": 2215,
        "y": 140,
        "wires": [
            [
                "68be2fee3aae9c69",
                "f0f937d270eec204",
                "67ccd5f7bcef8211"
            ]
        ]
    },
    {
        "id": "67ccd5f7bcef8211",
        "type": "delay",
        "z": "f85f40305fee5602",
        "g": "98bbe5cf9c49f8f7",
        "name": "",
        "pauseType": "delay",
        "timeout": "20",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 2410,
        "y": 260,
        "wires": [
            [
                "b45a05219e24e362"
            ]
        ]
    },
    {
        "id": "b45a05219e24e362",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "98bbe5cf9c49f8f7",
        "name": "RGB 0x104 Color",
        "func": "if (msg.payload == \"Red\")\n    var RGBCmd = \"AT+MDTS 0x0104 0 0 0 0x870100050000\" + \"FF0000\"\nelse if (msg.payload == \"Blue\")\n    var RGBCmd = \"AT+MDTS 0x0104 0 0 0 0x870100050000\" + \"0000FF\"\nelse if (msg.payload == \"Green\")\n    var RGBCmd = \"AT+MDTS 0x0104 0 0 0 0x870100050000\" + \"00FF00\"\nelse if (msg.payload == \"OFF\")\n    var RGBCmd = \"AT+MDTS 0x0104 0 0 0 0x870100050000\" + \"000000\"\nreturn {payload :RGBCmd};\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2670,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "523cce3d5172849f",
        "type": "ui_slider",
        "z": "f85f40305fee5602",
        "name": "temper_high",
        "label": "Temperature High",
        "tooltip": "",
        "group": "677a19ebf2be3c4c",
        "order": 4,
        "width": 8,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "40",
        "step": 1,
        "className": "",
        "x": 110,
        "y": 1620,
        "wires": [
            [
                "6ff990b5f5608be2"
            ]
        ]
    },
    {
        "id": "68bdc43a7c98e40d",
        "type": "ui_slider",
        "z": "f85f40305fee5602",
        "name": "temper_low",
        "label": "Temperature Low",
        "tooltip": "",
        "group": "677a19ebf2be3c4c",
        "order": 5,
        "width": 8,
        "height": 1,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": 0,
        "max": "40",
        "step": 1,
        "className": "",
        "x": 110,
        "y": 1680,
        "wires": [
            [
                "3e03a692ee7b1d2e"
            ]
        ]
    },
    {
        "id": "6ff990b5f5608be2",
        "type": "change",
        "z": "f85f40305fee5602",
        "name": "to temper_high",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "temper_high",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "3e03a692ee7b1d2e",
        "type": "change",
        "z": "f85f40305fee5602",
        "name": "to temper_low",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "temper_low",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 280,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "45d1ae1af4f4c072",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "eff4a73a11ad3f9f",
        "name": "parseColi",
        "func": "var coli_status = msg.payload.coli;\nif (coli_status == 1)\n    return {payload : \"Red\"};\nelse if (coli_status == 0)\n    return {payload: \"OFF\"};\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 120,
        "y": 880,
        "wires": [
            [
                "3d704988f522b366"
            ]
        ]
    },
    {
        "id": "3d704988f522b366",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "eff4a73a11ad3f9f",
        "name": "RGB 0x103 Color",
        "func": "if (msg.payload == \"Red\")\n    var RGBCmd = \"AT+MDTS 0x0100 0 0 0 0x870100050000\" + \"FF0000\"\nelse if (msg.payload == \"Blue\")\n    var RGBCmd = \"AT+MDTS 0x0100 0 0 0 0x870100050000\" + \"0000FF\"\nelse if (msg.payload == \"Green\")\n    var RGBCmd = \"AT+MDTS 0x0100 0 0 0 0x870100050000\" + \"00FF00\"\nelse if (msg.payload == \"OFF\")\n    var RGBCmd = \"AT+MDTS 0x0100 0 0 0 0x870100050000\" + \"000000\"\nreturn {payload :RGBCmd};\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 880,
        "wires": [
            [
                "cc7f843cdf5d6825",
                "06b624f825f35a30"
            ]
        ]
    },
    {
        "id": "cc7f843cdf5d6825",
        "type": "debug",
        "z": "f85f40305fee5602",
        "g": "eff4a73a11ad3f9f",
        "name": "debug 17",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 840,
        "wires": []
    },
    {
        "id": "06b624f825f35a30",
        "type": "link out",
        "z": "f85f40305fee5602",
        "g": "eff4a73a11ad3f9f",
        "name": "link out 6",
        "mode": "link",
        "links": [],
        "x": 555,
        "y": 880,
        "wires": []
    },
    {
        "id": "729e82e7da32f66b",
        "type": "function",
        "z": "f85f40305fee5602",
        "name": "PlugStatusToATcmd 0x101",
        "func": "if (msg.payload == true)\n    return { payload: \"AT+MDTS \" + \"0x0101\" + \" 0 0 0 0x8702000101\" };\nelse\n    return { payload: \"AT+MDTS \" + \"0x0101\" + \" 0 0 0 0x8702000100\" };\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 160,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "5bdb6278059a85fa",
        "type": "ui_switch",
        "z": "f85f40305fee5602",
        "g": "10aeae2f48fc9000",
        "name": "Plug1 ON/OFF",
        "label": "Plug SW1",
        "tooltip": "",
        "group": "6bb75a0b2389a7fa",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 780,
        "y": 1620,
        "wires": [
            [
                "398e94646ce79317"
            ]
        ]
    },
    {
        "id": "0b8ab85b55bea38d",
        "type": "ui_switch",
        "z": "f85f40305fee5602",
        "g": "10aeae2f48fc9000",
        "name": "Plug2 ON/OFF",
        "label": "Plug SW2",
        "tooltip": "",
        "group": "6bb75a0b2389a7fa",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 780,
        "y": 1680,
        "wires": [
            [
                "4954f733a15ec789"
            ]
        ]
    },
    {
        "id": "902883fae92acef8",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "10aeae2f48fc9000",
        "name": "",
        "group": "6bb75a0b2389a7fa",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "ALL OFF",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "false",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 800,
        "y": 1760,
        "wires": [
            [
                "5e93126055ffbe99"
            ]
        ]
    },
    {
        "id": "edd99be935d3f97e",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "10aeae2f48fc9000",
        "name": "",
        "group": "6bb75a0b2389a7fa",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": true,
        "label": "ALL ON",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "true",
        "payloadType": "bool",
        "topic": "topic",
        "topicType": "msg",
        "x": 800,
        "y": 1720,
        "wires": [
            [
                "5e93126055ffbe99"
            ]
        ]
    },
    {
        "id": "bc2ef31537856908",
        "type": "function",
        "z": "f85f40305fee5602",
        "name": "RGBOFFToATcmd 0x103",
        "func": "var RGBCmd = \"AT+MDTS 0x0103 0 0 0 0x870100050000\" + \"000000\"\nreturn {payload :RGBCmd};\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 150,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "ae4db55ad64e2354",
        "type": "ui_switch",
        "z": "f85f40305fee5602",
        "g": "d07605ca557c7f27",
        "name": "Digital Out",
        "label": "DO",
        "tooltip": "",
        "group": "6bb75a0b2389a7fa",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": true,
        "className": "",
        "x": 850,
        "y": 1860,
        "wires": [
            [
                "a81ed3ae8eaec8c8"
            ]
        ]
    },
    {
        "id": "df56b414f3b57c97",
        "type": "link in",
        "z": "f85f40305fee5602",
        "g": "d07605ca557c7f27",
        "name": "link in 1",
        "links": [],
        "x": 715,
        "y": 1860,
        "wires": [
            [
                "ae4db55ad64e2354",
                "72cafe16bc63eff1"
            ]
        ]
    },
    {
        "id": "72cafe16bc63eff1",
        "type": "ui_led",
        "z": "f85f40305fee5602",
        "g": "d07605ca557c7f27",
        "order": 6,
        "group": "6bb75a0b2389a7fa",
        "width": 3,
        "height": 1,
        "label": "DI",
        "labelPlacement": "left",
        "labelAlignment": "left",
        "colorForValue": [
            {
                "color": "#ff0000",
                "value": "true",
                "valueType": "bool"
            },
            {
                "color": "#008000",
                "value": "false",
                "valueType": "bool"
            }
        ],
        "allowColorForValueInMessage": false,
        "shape": "circle",
        "showGlow": true,
        "name": "",
        "x": 830,
        "y": 1900,
        "wires": []
    },
    {
        "id": "6e29483e1914a74e",
        "type": "switch",
        "z": "f85f40305fee5602",
        "g": "7fd0484cc017c74d",
        "name": "check DI",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "false"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 120,
        "y": 1240,
        "wires": [
            [
                "f05b731643d2eb9d"
            ],
            [
                "47337b6de0153805"
            ]
        ]
    },
    {
        "id": "a53d64f71ca160fe",
        "type": "ui_toast",
        "z": "f85f40305fee5602",
        "g": "7fd0484cc017c74d",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "Line 已通知",
        "name": "Line 已通知",
        "x": 550,
        "y": 1240,
        "wires": []
    },
    {
        "id": "5e69845684d90118",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "4581c544ab4f67dc",
        "name": "",
        "group": "8072c1412b794784",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "IR_FAN ON",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "ON",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 770,
        "y": 2000,
        "wires": [
            [
                "5b83c9a64ea532bd"
            ]
        ]
    },
    {
        "id": "b8cb9daab4a79380",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "",
        "label": "BULB 1",
        "group": "9c48fcb187edb1c0",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 480,
        "wires": [
            [
                "27f764c89746ffa2"
            ]
        ]
    },
    {
        "id": "aa38429e70ea0ba2",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "",
        "group": "9c48fcb187edb1c0",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "OFF",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 750,
        "y": 600,
        "wires": [
            [
                "07aa5b14c47fa551"
            ]
        ]
    },
    {
        "id": "2237046f5ef7b4e0",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "",
        "label": "BULB 2",
        "group": "9c48fcb187edb1c0",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 520,
        "wires": [
            [
                "8bf876559e64eba5"
            ]
        ]
    },
    {
        "id": "1ce4b79ea6490119",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "",
        "label": "BULB 3",
        "group": "9c48fcb187edb1c0",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 560,
        "wires": [
            [
                "c91e285da6b001ac"
            ]
        ]
    },
    {
        "id": "87769351c27639cf",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "",
        "group": "9c48fcb187edb1c0",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "ON",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 750,
        "y": 640,
        "wires": [
            [
                "07aa5b14c47fa551"
            ]
        ]
    },
    {
        "id": "4c2b127f6da39d86",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "",
        "label": "BULB 8",
        "group": "16f25ea74cc357a2",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 1040,
        "wires": [
            [
                "0be73bad3b25edc7"
            ]
        ]
    },
    {
        "id": "a730117a2dd7ba8f",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "",
        "group": "16f25ea74cc357a2",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "OFF",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 750,
        "y": 1160,
        "wires": [
            [
                "d20d207be71075b9"
            ]
        ]
    },
    {
        "id": "d8a01c53306ce2a8",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "",
        "label": "BULB 9",
        "group": "16f25ea74cc357a2",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 1080,
        "wires": [
            [
                "205adb62cb99c472"
            ]
        ]
    },
    {
        "id": "944b625b04ae64cb",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "",
        "label": "BULB 10",
        "group": "16f25ea74cc357a2",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 1120,
        "wires": [
            [
                "82b7146c9161b43d"
            ]
        ]
    },
    {
        "id": "cfd33c08e499e6d0",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "",
        "group": "16f25ea74cc357a2",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "ON",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 750,
        "y": 1200,
        "wires": [
            [
                "d20d207be71075b9"
            ]
        ]
    },
    {
        "id": "aef8c3dc96e555b6",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "",
        "label": "BULB 4",
        "group": "d794227a87e56a5c",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 740,
        "wires": [
            [
                "74ab9eebe642c2f7"
            ]
        ]
    },
    {
        "id": "4cf82726a2e51373",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "",
        "group": "d794227a87e56a5c",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "OFF",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 750,
        "y": 900,
        "wires": [
            [
                "c24a708bacd33124"
            ]
        ]
    },
    {
        "id": "74bf4cd673c57ae7",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "",
        "label": "BULB 5",
        "group": "d794227a87e56a5c",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 780,
        "wires": [
            [
                "c1e58f6a6fdad134"
            ]
        ]
    },
    {
        "id": "da113a37ea6823bc",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "",
        "label": "BULB 6",
        "group": "d794227a87e56a5c",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 820,
        "wires": [
            [
                "7d1ce7f4f1cd7b8a"
            ]
        ]
    },
    {
        "id": "1cb3863c12af92de",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "",
        "label": "BULB 7",
        "group": "d794227a87e56a5c",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "flow",
        "className": "",
        "x": 760,
        "y": 860,
        "wires": [
            [
                "161262820e6c422e"
            ]
        ]
    },
    {
        "id": "111245b1940ceab7",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "",
        "group": "d794227a87e56a5c",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "ON",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 750,
        "y": 940,
        "wires": [
            [
                "c24a708bacd33124"
            ]
        ]
    },
    {
        "id": "a43996c59e5f7d1a",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "",
        "label": "BULB 11",
        "group": "172e29420fe3f834",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 3,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 1300,
        "wires": [
            [
                "370579cf06ffa162"
            ]
        ]
    },
    {
        "id": "955d67ba77a01907",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "",
        "group": "172e29420fe3f834",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All Off",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "OFF",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 750,
        "y": 1460,
        "wires": [
            [
                "7cb60262fc4ba5b5"
            ]
        ]
    },
    {
        "id": "6cf1cf9f370aea4b",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "",
        "label": "BULB 12",
        "group": "172e29420fe3f834",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 1340,
        "wires": [
            [
                "3b4861289cc2ea7c"
            ]
        ]
    },
    {
        "id": "e889e3e5fe31fc97",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "",
        "label": "BULB 13",
        "group": "172e29420fe3f834",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 5,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 760,
        "y": 1380,
        "wires": [
            [
                "5c751c4034d324a5"
            ]
        ]
    },
    {
        "id": "233be46f9acb32f1",
        "type": "ui_colour_picker",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "",
        "label": "BULB 14",
        "group": "172e29420fe3f834",
        "format": "hex",
        "outformat": "string",
        "showSwatch": true,
        "showPicker": false,
        "showValue": true,
        "showHue": false,
        "showAlpha": false,
        "showLightness": true,
        "square": "false",
        "dynOutput": "false",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": true,
        "topic": "topic",
        "topicType": "flow",
        "className": "",
        "x": 760,
        "y": 1420,
        "wires": [
            [
                "08c19be9e8a2cbf3"
            ]
        ]
    },
    {
        "id": "3217e01d9c6d6bfd",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "",
        "group": "172e29420fe3f834",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "All On",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "ON",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 750,
        "y": 1500,
        "wires": [
            [
                "7cb60262fc4ba5b5"
            ]
        ]
    },
    {
        "id": "2d700e0c5209ab5b",
        "type": "ui_chart",
        "z": "f85f40305fee5602",
        "g": "a6ad5e1c1d6001c9",
        "name": "Temp",
        "group": "85dcb6d14a5fe795",
        "order": 1,
        "width": 18,
        "height": 6,
        "label": "Energy",
        "chartType": "line",
        "legend": "false",
        "xformat": "mm:ss",
        "interpolate": "linear",
        "nodata": "Temp",
        "dot": true,
        "ymin": "0",
        "ymax": "10",
        "removeOlder": "1",
        "removeOlderPoints": "",
        "removeOlderUnit": "1",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#aec7e8",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 570,
        "y": 1940,
        "wires": [
            []
        ]
    },
    {
        "id": "e73d1c127e515d54",
        "type": "comment",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "Sanmic Note",
        "info": "SOP:\nStep 01: Get ID (ex: 0x0100)\nStep 02: modify ID on \"set 0x0101 for Bulb\"\nStep 03: Deploy \nStep 04: Click on bulb\nStep 05: Selec a color that you like\nStep 06: Verify the result",
        "x": 770,
        "y": 420,
        "wires": []
    },
    {
        "id": "e13d1c775068bff0",
        "type": "inject",
        "z": "f85f40305fee5602",
        "g": "41a5f6edc92cb328",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": ".1",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 1080,
        "wires": [
            [
                "db3e358ca3c41df6"
            ]
        ]
    },
    {
        "id": "f41c46f15fb7b601",
        "type": "debug",
        "z": "f85f40305fee5602",
        "g": "41a5f6edc92cb328",
        "name": "debug 26",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 1080,
        "wires": []
    },
    {
        "id": "cae09427295713ef",
        "type": "inject",
        "z": "f85f40305fee5602",
        "g": "a6ad5e1c1d6001c9",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": ".1",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 120,
        "y": 1940,
        "wires": [
            [
                "9466cd280e25992f"
            ]
        ]
    },
    {
        "id": "9466cd280e25992f",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "a6ad5e1c1d6001c9",
        "name": "random",
        "func": "msg.payload= Math.random() * 10\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 1940,
        "wires": [
            [
                "2d700e0c5209ab5b"
            ]
        ]
    },
    {
        "id": "37175168d9397373",
        "type": "inject",
        "z": "f85f40305fee5602",
        "g": "e0cd5f2e6fa3a8b6",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "1",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 740,
        "wires": [
            [
                "c81789d9938fd9b0"
            ]
        ]
    },
    {
        "id": "94c8e5c626de76b6",
        "type": "comment",
        "z": "f85f40305fee5602",
        "g": "41a5f6edc92cb328",
        "name": "Sanmic Note",
        "info": "目前只有在本機使用127.0.0.1才能看到",
        "x": 130,
        "y": 1120,
        "wires": []
    },
    {
        "id": "9095854831b4ec1a",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "name": "",
        "group": "36ee8f40172a59c7",
        "order": 1,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "1BTN_OFF",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "OFF",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 770,
        "y": 360,
        "wires": [
            [
                "c30edf9c048e968d"
            ]
        ]
    },
    {
        "id": "afd4685c06431cf8",
        "type": "ui_button",
        "z": "f85f40305fee5602",
        "name": "",
        "group": "36ee8f40172a59c7",
        "order": 2,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "1BTN_ON",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "ON",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 770,
        "y": 320,
        "wires": [
            [
                "c30edf9c048e968d"
            ]
        ]
    },
    {
        "id": "16427a9088b87d73",
        "type": "debug",
        "z": "f85f40305fee5602",
        "name": "debug 28",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1220,
        "y": 340,
        "wires": []
    },
    {
        "id": "f05b731643d2eb9d",
        "type": "line-notify",
        "z": "f85f40305fee5602",
        "g": "7fd0484cc017c74d",
        "name": "Line Notify Alarm(High)",
        "message": "高水位，啟動馬達",
        "contentType": "message",
        "imageThumbnail": "",
        "imageUrl": "",
        "sticker": "default",
        "stickerPackageId": "1",
        "stickerId": "1",
        "silent": false,
        "creds": "1c3a4a841a6dae33",
        "x": 330,
        "y": 1220,
        "wires": [
            [
                "a53d64f71ca160fe"
            ]
        ]
    },
    {
        "id": "47337b6de0153805",
        "type": "line-notify",
        "z": "f85f40305fee5602",
        "g": "7fd0484cc017c74d",
        "name": "Line Notify Alarm(Low)",
        "message": "低水位，馬達已關閉",
        "contentType": "message",
        "imageThumbnail": "",
        "imageUrl": "",
        "sticker": "default",
        "stickerPackageId": "1",
        "stickerId": "1",
        "silent": false,
        "creds": "1c3a4a841a6dae33",
        "x": 330,
        "y": 1260,
        "wires": [
            [
                "a53d64f71ca160fe"
            ]
        ]
    },
    {
        "id": "db3e358ca3c41df6",
        "type": "ui_webcam",
        "z": "f85f40305fee5602",
        "g": "41a5f6edc92cb328",
        "name": "Camera",
        "group": "e09a9357081fdf2e",
        "order": 1,
        "width": 8,
        "height": 6,
        "countdown": false,
        "autoStart": true,
        "hideCaptureButton": false,
        "showImage": "2",
        "mirror": true,
        "format": "jpeg",
        "x": 300,
        "y": 1080,
        "wires": [
            [
                "f41c46f15fb7b601"
            ]
        ]
    },
    {
        "id": "c81789d9938fd9b0",
        "type": "ui_digital_clock",
        "z": "f85f40305fee5602",
        "g": "e0cd5f2e6fa3a8b6",
        "name": "Dclock",
        "group": "677a19ebf2be3c4c",
        "order": 1,
        "width": 8,
        "height": 1,
        "x": 570,
        "y": 740,
        "wires": []
    },
    {
        "id": "86d1e7f6d7569b42",
        "type": "image",
        "z": "f85f40305fee5602",
        "g": "41a5f6edc92cb328",
        "name": "",
        "width": "240",
        "data": "payload",
        "dataType": "msg",
        "thumbnail": false,
        "active": true,
        "pass": false,
        "outputs": 0,
        "x": 520,
        "y": 1120,
        "wires": []
    },
    {
        "id": "27f764c89746ffa2",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "Set color uid 0x0102",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0102",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 480,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "8bf876559e64eba5",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "Set color uid 0x0103",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0103",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 520,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "c91e285da6b001ac",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "Set color uid 0x0104",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0104",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 560,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "07aa5b14c47fa551",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "52fdb58c6b06cc45",
        "name": "Set color uid 0xC000",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0xC001",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 620,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "c30edf9c048e968d",
        "type": "change",
        "z": "f85f40305fee5602",
        "name": "Set color uid 0x0100",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0100",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 340,
        "wires": [
            [
                "16427a9088b87d73",
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "74ab9eebe642c2f7",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "Set color uid 0x0105",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0105",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 740,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "c1e58f6a6fdad134",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "Set color uid 0x0106",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0106",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 780,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "7d1ce7f4f1cd7b8a",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "Set color uid 0x0110",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0110",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 820,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "161262820e6c422e",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "Set color uid 0x0108",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0108",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 860,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "c24a708bacd33124",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "b30195a356d478ee",
        "name": "Set color uid 0xC002",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0xC002",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 940,
        "y": 920,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "0be73bad3b25edc7",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "Set color uid 0x0109",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0109",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1040,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "205adb62cb99c472",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "Set color uid 0x010A",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x010A",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1080,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "82b7146c9161b43d",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "Set color uid 0x010B",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x010B",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1120,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "d20d207be71075b9",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "6e73149f54f4c6b2",
        "name": "Set color uid 0xC003",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0xC003",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1160,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "370579cf06ffa162",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "Set color uid 0x010C",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x010C",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1300,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "3b4861289cc2ea7c",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "Set color uid 0x010D",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x010D",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1340,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "5c751c4034d324a5",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "Set color uid 0x010E",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x010E",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1380,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "08c19be9e8a2cbf3",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "Set color uid 0x010F",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x010F",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1420,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "7cb60262fc4ba5b5",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "d3065452a7e33479",
        "name": "Set color uid 0xC004",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0xC004",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "COLOR",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 980,
        "y": 1460,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "398e94646ce79317",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "10aeae2f48fc9000",
        "name": "Set PLUG uid 0x0100",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0100",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "PLUG",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 1620,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "4954f733a15ec789",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "10aeae2f48fc9000",
        "name": "Set PLUG uid 0x0100",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0101",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "PLUG",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 1680,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "5e93126055ffbe99",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "10aeae2f48fc9000",
        "name": "Set PLUG uid 0xC000",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0xC000",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "PLUG",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 1740,
        "wires": [
            [
                "df8e445e85cee804"
            ]
        ]
    },
    {
        "id": "c053997cd49abc10",
        "type": "function",
        "z": "f85f40305fee5602",
        "g": "eff4a73a11ad3f9f",
        "name": "parse空氣",
        "func": "\nreturn ([{payload:msg.payload.humidity} ,\n            { payload: msg.payload.temper },\n            { payload: msg.payload.co2 } ,\n            { payload: msg.payload.pm25 } \n            ]);",
        "outputs": 4,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 960,
        "wires": [
            [
                "e10a6df36558e7e2"
            ],
            [
                "cbc8c7dde36554ed"
            ],
            [],
            []
        ],
        "outputLabels": [
            "humidity",
            "temper",
            "CO2",
            "PM2.5"
        ]
    },
    {
        "id": "5b83c9a64ea532bd",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "4581c544ab4f67dc",
        "name": "Set FAN uid",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "FAN",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0101",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 970,
        "y": 2000,
        "wires": [
            []
        ]
    },
    {
        "id": "2bce3bb5ae4c2bc0",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "4581c544ab4f67dc",
        "name": "Set FAN uid speed",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "FAN",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0101",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "speed",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "SPEED",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 990,
        "y": 2040,
        "wires": [
            []
        ]
    },
    {
        "id": "a81ed3ae8eaec8c8",
        "type": "change",
        "z": "f85f40305fee5602",
        "g": "d07605ca557c7f27",
        "name": "Set SmartBox DO uid",
        "rules": [
            {
                "t": "set",
                "p": "uid",
                "pt": "msg",
                "to": "0x0102",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "SMARTBOX",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "channel",
                "pt": "msg",
                "to": "DO",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1040,
        "y": 1860,
        "wires": [
            []
        ]
    },
    {
        "id": "459db52859b04553",
        "type": "function",
        "z": "f85f40305fee5602",
        "name": "parse電表",
        "func": "\nreturn ([{payload:msg.payload.current} ,\n            { payload: msg.payload.voltage },\n            { payload: msg.payload.power }  \n            ]);",
        "outputs": 3,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 100,
        "y": 1540,
        "wires": [
            [],
            [],
            []
        ],
        "outputLabels": [
            "current",
            "voltage",
            "power"
        ]
    },
    {
        "id": "a9c1abc2ec0cbb9d",
        "type": "json",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "",
        "property": "payload",
        "action": "str",
        "pretty": true,
        "x": 470,
        "y": 120,
        "wires": [
            [
                "09b7e067abac609c"
            ]
        ]
    },
    {
        "id": "09b7e067abac609c",
        "type": "file",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "",
        "filename": "device.json",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "utf8",
        "x": 630,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "da70d3343c11c582",
        "type": "link in",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "save file",
        "links": [
            "efa54db14fb13f2f",
            "f94b99bfec9035ba"
        ],
        "x": 175,
        "y": 120,
        "wires": [
            [
                "a9c1abc2ec0cbb9d",
                "1f7ce5339e0d975e"
            ]
        ]
    },
    {
        "id": "764069cfe3aa7583",
        "type": "inject",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "open file",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 320,
        "y": 180,
        "wires": [
            [
                "94864f9d75c9de14"
            ]
        ]
    },
    {
        "id": "94864f9d75c9de14",
        "type": "file in",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "Read Device file",
        "filename": "device.json",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "utf8",
        "allProps": false,
        "x": 500,
        "y": 180,
        "wires": [
            [
                "09166fed0d7c8e3e"
            ]
        ]
    },
    {
        "id": "09166fed0d7c8e3e",
        "type": "json",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "",
        "property": "payload",
        "action": "obj",
        "pretty": false,
        "x": 670,
        "y": 180,
        "wires": [
            [
                "315c7d88922d92aa"
            ]
        ]
    },
    {
        "id": "cbc3ded3dcc05003",
        "type": "catch",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "Json not finded",
        "scope": [
            "94864f9d75c9de14"
        ],
        "uncaught": false,
        "x": 320,
        "y": 240,
        "wires": [
            [
                "3e5ea0bc3f176061",
                "b3595949d9989a53"
            ]
        ]
    },
    {
        "id": "b209974ab64a1e28",
        "type": "file",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "Write new file",
        "filename": "device.json",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "utf8",
        "x": 720,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "3e5ea0bc3f176061",
        "type": "function",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "cretae empty list",
        "func": "var device_json = \n{\n    \"gwMac\": \"\",\n    \"gwType\": \"mini_PC\",\n    \"gwPosition\": \"主機位置\",\n    \"devices\": []\n}\n\nreturn {payload:device_json};",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 240,
        "wires": [
            [
                "b209974ab64a1e28"
            ]
        ]
    },
    {
        "id": "315c7d88922d92aa",
        "type": "function",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "init global var",
        "func": "var jsonFile = msg.payload\nglobal.set (\"enable_mqtt\", false)\n\njsonFile.devices.forEach(function(device) {\n    device.state = 0;\n});\nglobal.set(\"jsonFile\",jsonFile)\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 180,
        "wires": [
            [
                "ded16657c80bcb9f"
            ]
        ]
    },
    {
        "id": "ded16657c80bcb9f",
        "type": "debug",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "debug 31",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 180,
        "wires": []
    },
    {
        "id": "1f7ce5339e0d975e",
        "type": "debug",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "debug 59",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 80,
        "wires": []
    },
    {
        "id": "b3595949d9989a53",
        "type": "debug",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "Read File Error",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 520,
        "y": 280,
        "wires": []
    },
    {
        "id": "82a97b9d8c0f5981",
        "type": "function",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "create csv file (AirBox)",
        "func": "\n// 獲取當前日期和時間\nlet now = new Date();\nlet dateStr = now.getFullYear() + '-' +\n    ('0' + (now.getMonth() + 1)).slice(-2) + '-' +\n    ('0' + now.getDate()).slice(-2) + \"_AirBox\";\n\n// 檔案路徑（可以自行調整）\nlet filePath = dateStr + \".csv\";\n// 格式化當地時間為 HH:MM:SS\nlet currentTime = now.toLocaleTimeString('zh-TW', { hour12: false });\n\n// CSV 資料，這裡可以根據需求替換測試數據\nmsg.payload = { time: currentTime,\n                temper : msg.payload.temper,\n                humidity : msg.payload.humidity,\n                 \"CO2\": msg.payload.co2,\n                \"PM2.5\": msg.payload.pm25\n}\n\n// 將檔案路徑和 CSV 資料存入 msg 物件，方便後續節點使用\nmsg.filePath = filePath;\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 420,
        "wires": [
            [
                "85895d137d570d70"
            ]
        ]
    },
    {
        "id": "6c54b625cf180f3c",
        "type": "inject",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "test AirBox",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "uid",
                "v": "0x0102",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"temper\":23.5,\"humidity\":80,\"co2\":465,\"pm25\":4}",
        "payloadType": "json",
        "x": 220,
        "y": 420,
        "wires": [
            [
                "82a97b9d8c0f5981"
            ]
        ]
    },
    {
        "id": "deef6a95e127917c",
        "type": "file",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "OverWriteFile",
        "filename": "filePath",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "utf8",
        "x": 1000,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "4641f68b0a4189a7",
        "type": "csv",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "CSV W/ Herder",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\r",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": "",
        "include_null_values": "",
        "x": 800,
        "y": 440,
        "wires": [
            [
                "deef6a95e127917c"
            ]
        ]
    },
    {
        "id": "85895d137d570d70",
        "type": "fs-ops-access",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "",
        "path": "",
        "pathType": "str",
        "filename": "filePath",
        "filenameType": "msg",
        "read": true,
        "write": true,
        "throwerror": false,
        "x": 630,
        "y": 420,
        "wires": [
            [
                "9a6299e6ae23d741"
            ],
            [
                "4641f68b0a4189a7"
            ]
        ]
    },
    {
        "id": "9a6299e6ae23d741",
        "type": "csv",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "CSV W/O Herder",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\r",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": "",
        "include_null_values": "",
        "x": 810,
        "y": 400,
        "wires": [
            [
                "4ba7de3c18cec7f7"
            ]
        ]
    },
    {
        "id": "4ba7de3c18cec7f7",
        "type": "file",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "AppendWriteFile",
        "filename": "filePath",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "false",
        "encoding": "utf8",
        "x": 1000,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "b298019e3ead7f10",
        "type": "function",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "create csv file (PowerMeter)",
        "func": "\n// 獲取當前日期和時間\nlet now = new Date();\nlet dateStr = now.getFullYear() + '-' +\n    ('0' + (now.getMonth() + 1)).slice(-2) + '-' +\n    ('0' + now.getDate()).slice(-2)+\"_PowerMeter\";\n\n// 檔案路徑（可以自行調整）\nlet filePath = dateStr + \".csv\";\n// 格式化當地時間為 HH:MM:SS\nlet currentTime = now.toLocaleTimeString('zh-TW', { hour12: false });\n\n// CSV 資料，這裡可以根據需求替換測試數據\nmsg.payload = { time: currentTime,\n                current : msg.payload.current,\n                voltage : msg.payload.voltage,\n                power: msg.payload.power\n}\n\n// 將檔案路徑和 CSV 資料存入 msg 物件，方便後續節點使用\nmsg.filePath = filePath;\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 540,
        "wires": [
            [
                "20594bfde7d78dda"
            ]
        ]
    },
    {
        "id": "c20f89f2de5c6902",
        "type": "file",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "OverWriteFile",
        "filename": "filePath",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "true",
        "encoding": "utf8",
        "x": 1060,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "ac7479d3236d1ab4",
        "type": "csv",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "CSV W/ Herder",
        "sep": ",",
        "hdrin": "",
        "hdrout": "all",
        "multi": "one",
        "ret": "\\r",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": "",
        "include_null_values": "",
        "x": 860,
        "y": 560,
        "wires": [
            [
                "c20f89f2de5c6902"
            ]
        ]
    },
    {
        "id": "20594bfde7d78dda",
        "type": "fs-ops-access",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "",
        "path": "",
        "pathType": "str",
        "filename": "filePath",
        "filenameType": "msg",
        "read": true,
        "write": true,
        "throwerror": false,
        "x": 670,
        "y": 540,
        "wires": [
            [
                "c40aca5205869f43"
            ],
            [
                "ac7479d3236d1ab4"
            ]
        ]
    },
    {
        "id": "c40aca5205869f43",
        "type": "csv",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "CSV W/O Herder",
        "sep": ",",
        "hdrin": "",
        "hdrout": "none",
        "multi": "one",
        "ret": "\\r",
        "temp": "",
        "skip": "0",
        "strings": true,
        "include_empty_strings": "",
        "include_null_values": "",
        "x": 870,
        "y": 520,
        "wires": [
            [
                "0f1b22f8d12f3bcb"
            ]
        ]
    },
    {
        "id": "0f1b22f8d12f3bcb",
        "type": "file",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "AppendWriteFile",
        "filename": "filePath",
        "filenameType": "msg",
        "appendNewline": false,
        "createDir": false,
        "overwriteFile": "false",
        "encoding": "utf8",
        "x": 1060,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "8361f4051e87563a",
        "type": "inject",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "test powerMeter",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "uid",
                "v": "0x0102",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"current\":0.34,\"voltage\":113.4,\"power\":9}",
        "payloadType": "json",
        "x": 220,
        "y": 540,
        "wires": [
            [
                "b298019e3ead7f10"
            ]
        ]
    },
    {
        "id": "0fb8096ba6ed2dc0",
        "type": "link in",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "WriteAirBoxData",
        "links": [],
        "x": 215,
        "y": 460,
        "wires": [
            [
                "82a97b9d8c0f5981"
            ]
        ]
    },
    {
        "id": "b0378e5b513ab50c",
        "type": "link in",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "WritePowerMeterData",
        "links": [],
        "x": 215,
        "y": 500,
        "wires": [
            [
                "b298019e3ead7f10"
            ]
        ]
    },
    {
        "id": "e4963a404cfdc9b3",
        "type": "comment",
        "z": "fe798ccc3bac8377",
        "g": "cc49724e187187ad",
        "name": "install node-red-contrib-fs-ops",
        "info": "node-red-contrib-fs-ops",
        "x": 460,
        "y": 480,
        "wires": []
    },
    {
        "id": "a39345f093ed8418",
        "type": "comment",
        "z": "fe798ccc3bac8377",
        "g": "2fe1a9b32ffb655c",
        "name": "note",
        "info": "1. 讀取 device.json\n    讀取錯誤(不存在)，建立一空檔案\n    讀取正確 將檔案存放到 global 變數\n2. 寫檔案\n    將json 內容轉換為文字後寫入device.json (更新設備檔案)",
        "x": 990,
        "y": 80,
        "wires": []
    },
    {
        "id": "f4f98c7791b39b3b",
        "type": "ui_button",
        "z": "8cbec6d1d47d2ee2",
        "g": "389d09060386b9ac",
        "name": "",
        "group": "91ac9518a0b9be8c",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "新增",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "AT+DIS 1",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 430,
        "y": 220,
        "wires": [
            [
                "7b1e43c5fdc65057"
            ]
        ]
    },
    {
        "id": "cccc0ef474ab1a04",
        "type": "link out",
        "z": "8cbec6d1d47d2ee2",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "d9717fc33326853d"
        ],
        "x": 895,
        "y": 440,
        "wires": []
    },
    {
        "id": "4c354bfa3da9019d",
        "type": "ui_button",
        "z": "8cbec6d1d47d2ee2",
        "g": "2f4f0392c0259930",
        "name": "",
        "group": "29f46230ac4e7e76",
        "order": 6,
        "width": 3,
        "height": 1,
        "passthru": false,
        "label": "移除",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "NR",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 370,
        "y": 360,
        "wires": [
            [
                "b6ac0ac2cbadf22e"
            ]
        ]
    },
    {
        "id": "fcdd87667545c566",
        "type": "ui_text_input",
        "z": "8cbec6d1d47d2ee2",
        "g": "2f4f0392c0259930",
        "name": "uid",
        "label": "UID",
        "tooltip": "",
        "group": "29f46230ac4e7e76",
        "order": 4,
        "width": 3,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "uid",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 370,
        "y": 320,
        "wires": [
            [
                "b6ac0ac2cbadf22e"
            ]
        ]
    },
    {
        "id": "faca476248799e69",
        "type": "ui_button",
        "z": "8cbec6d1d47d2ee2",
        "name": "",
        "group": "d96c0dea78d55eb4",
        "order": 2,
        "width": 12,
        "height": 1,
        "passthru": false,
        "label": "查詢在線狀況",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "AT+NL",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 440,
        "y": 140,
        "wires": [
            [
                "bd05d49e9a9b8411"
            ]
        ]
    },
    {
        "id": "0518bbbcf5aa3436",
        "type": "ui_toast",
        "z": "8cbec6d1d47d2ee2",
        "g": "2f4f0392c0259930",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "移除 完成",
        "name": "",
        "x": 630,
        "y": 380,
        "wires": []
    },
    {
        "id": "39edf58fd2703a95",
        "type": "ui_text_input",
        "z": "8cbec6d1d47d2ee2",
        "g": "53147285f52a0f53",
        "name": "",
        "label": "訂閱目標",
        "tooltip": "",
        "group": "40355716c9630ec5",
        "order": 4,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "SUB",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 240,
        "y": 480,
        "wires": [
            [
                "996b80f6dad8df5a"
            ]
        ]
    },
    {
        "id": "d60b621015456b16",
        "type": "ui_text_input",
        "z": "8cbec6d1d47d2ee2",
        "g": "53147285f52a0f53",
        "name": "",
        "label": "訂閱者 UID",
        "tooltip": "",
        "group": "40355716c9630ec5",
        "order": 2,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "UID",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 230,
        "y": 520,
        "wires": [
            [
                "996b80f6dad8df5a"
            ]
        ]
    },
    {
        "id": "05db2f92486f7d88",
        "type": "ui_button",
        "z": "8cbec6d1d47d2ee2",
        "g": "53147285f52a0f53",
        "name": "",
        "group": "40355716c9630ec5",
        "order": 6,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "訂閱設定",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "SUB",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 240,
        "y": 560,
        "wires": [
            [
                "996b80f6dad8df5a"
            ]
        ]
    },
    {
        "id": "996b80f6dad8df5a",
        "type": "function",
        "z": "8cbec6d1d47d2ee2",
        "g": "53147285f52a0f53",
        "name": "訂閱",
        "func": "context.data = context.data || {}\n\nswitch (msg.topic){\n    case (\"UID\"):\n        context.data.uid = msg.payload\n        msg =null\n        break;\n    case (\"SUB\"):\n        context.data.sub = msg.payload\n        msg =null\n        break;\n    default:\n        break;\n        \n}\nif (msg.payload == \"SUB\"){\n    if (context.data.uid != null && context.data.sub != null){\n        return { topic: \"ATCMD\" , cmd: \"SUB\", uid: context.data.uid, sub: context.data.sub }\n    }\n}\n\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 480,
        "wires": [
            [
                "f967b6e0a4f2972a",
                "cccc0ef474ab1a04"
            ]
        ]
    },
    {
        "id": "f967b6e0a4f2972a",
        "type": "ui_toast",
        "z": "8cbec6d1d47d2ee2",
        "g": "53147285f52a0f53",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "訂閱成功",
        "name": "",
        "x": 650,
        "y": 520,
        "wires": []
    },
    {
        "id": "37b13cfe34a9eca0",
        "type": "ui_text_input",
        "z": "8cbec6d1d47d2ee2",
        "g": "5c4450d7d986425b",
        "name": "",
        "label": "推播目標",
        "tooltip": "",
        "group": "fbb2f61316063990",
        "order": 4,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "PUB",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 240,
        "y": 660,
        "wires": [
            [
                "238b7cc5f64bbd24"
            ]
        ]
    },
    {
        "id": "e85cf34e0d636415",
        "type": "ui_text_input",
        "z": "8cbec6d1d47d2ee2",
        "g": "5c4450d7d986425b",
        "name": "",
        "label": "推播者 UID",
        "tooltip": "",
        "group": "fbb2f61316063990",
        "order": 2,
        "width": 4,
        "height": 1,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "UID",
        "sendOnBlur": true,
        "className": "",
        "topicType": "str",
        "x": 230,
        "y": 700,
        "wires": [
            [
                "238b7cc5f64bbd24"
            ]
        ]
    },
    {
        "id": "12361385d1e2d0a1",
        "type": "ui_button",
        "z": "8cbec6d1d47d2ee2",
        "g": "5c4450d7d986425b",
        "name": "",
        "group": "fbb2f61316063990",
        "order": 6,
        "width": 4,
        "height": 1,
        "passthru": false,
        "label": "推播設定",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "PUB",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 240,
        "y": 740,
        "wires": [
            [
                "238b7cc5f64bbd24"
            ]
        ]
    },
    {
        "id": "238b7cc5f64bbd24",
        "type": "function",
        "z": "8cbec6d1d47d2ee2",
        "g": "5c4450d7d986425b",
        "name": "推播",
        "func": "context.data = context.data || {}\n\nswitch (msg.topic){\n    case (\"UID\"):\n        context.data.uid = msg.payload\n        msg =null\n        break;\n    case (\"PUB\"):\n        context.data.pub = msg.payload\n        msg =null\n        break;\n    default:\n        break;\n        \n}\n\nif (msg.payload == \"PUB\") {\n\n    if (context.data.uid != null && context.data.pub != null) {\n        return { topic: \"ATCMD\" ,cmd: \"PUB\", uid: context.data.uid, pub: context.data.pub }\n    }\n}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 630,
        "y": 660,
        "wires": [
            [
                "656769a63780b8a8",
                "cccc0ef474ab1a04"
            ]
        ]
    },
    {
        "id": "656769a63780b8a8",
        "type": "ui_toast",
        "z": "8cbec6d1d47d2ee2",
        "g": "5c4450d7d986425b",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "推播設定成功",
        "name": "",
        "x": 630,
        "y": 700,
        "wires": []
    },
    {
        "id": "6b7d2d2d6a5ce0d4",
        "type": "comment",
        "z": "8cbec6d1d47d2ee2",
        "name": "Sanmic Note",
        "info": "SOP:\nStep 01: Get ID\nStep 02:\nStep 03:\nStep 04:\nStep 05:  Verify the result\n",
        "x": 850,
        "y": 120,
        "wires": []
    },
    {
        "id": "7b1e43c5fdc65057",
        "type": "change",
        "z": "8cbec6d1d47d2ee2",
        "g": "389d09060386b9ac",
        "name": "Set DIS CMD",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "DISCOVERY",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "timeout",
                "pt": "msg",
                "to": "3",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 620,
        "y": 220,
        "wires": [
            [
                "cccc0ef474ab1a04"
            ]
        ]
    },
    {
        "id": "b6ac0ac2cbadf22e",
        "type": "function",
        "z": "8cbec6d1d47d2ee2",
        "g": "2f4f0392c0259930",
        "name": "Node RESET",
        "func": "context.data = context.data || {}\n\nswitch (msg.topic) {\n    case (\"uid\"):\n        context.data.uid = msg.payload\n        msg = null\n        break;\n    default:\n        break;\n}\nif  (msg.payload == \"NR\"){\n    if ((context.data.uid != null) && (context.data.uid != \"\"))\n        return {  topic : \"ATCMD\" , cmd :\"NR\", uid : context.data.uid };\n    else   \n        return { topic: \"ATCMD\", cmd: \"NR\" };\n\n}\n\n    ",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 320,
        "wires": [
            [
                "cccc0ef474ab1a04"
            ]
        ]
    },
    {
        "id": "bd05d49e9a9b8411",
        "type": "change",
        "z": "8cbec6d1d47d2ee2",
        "name": "Set NL CMD",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "ATCMD",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "cmd",
                "pt": "msg",
                "to": "NL",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 630,
        "y": 140,
        "wires": [
            [
                "cccc0ef474ab1a04"
            ]
        ]
    },
    {
        "id": "f54b1e4963170cd5",
        "type": "ui_toast",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "綁定成功 UID",
        "name": "綁定成功",
        "x": 400,
        "y": 920,
        "wires": []
    },
    {
        "id": "e48e67b9deb41cf2",
        "type": "ui_table",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "group": "91ac9518a0b9be8c",
        "name": "Devices List",
        "order": 1,
        "width": 0,
        "height": 0,
        "columns": [
            {
                "field": "mac",
                "title": "Mac ADDR",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "uuid",
                "title": "UUID",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 570,
        "y": 840,
        "wires": [
            [
                "9f6e80da7a129547"
            ]
        ]
    },
    {
        "id": "99de58fccf0a4590",
        "type": "link in",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "name": "DISCOVERY IN",
        "links": [
            "37f61c2a0737d62a"
        ],
        "x": 135,
        "y": 840,
        "wires": [
            [
                "14c1ec66924aafad"
            ]
        ]
    },
    {
        "id": "9f6e80da7a129547",
        "type": "change",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "name": "Set Binding CMD",
        "rules": [
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "BINDING",
                "tot": "str"
            },
            {
                "t": "move",
                "p": "payload.mac",
                "pt": "msg",
                "to": "mac",
                "tot": "msg"
            },
            {
                "t": "move",
                "p": "payload.uuid",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 770,
        "y": 840,
        "wires": [
            [
                "013c5b78ffda5222",
                "cccc0ef474ab1a04"
            ]
        ]
    },
    {
        "id": "14c1ec66924aafad",
        "type": "switch",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "name": "",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "DISCOVERY",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "BINDING",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 230,
        "y": 840,
        "wires": [
            [
                "e48e67b9deb41cf2"
            ],
            [
                "f54b1e4963170cd5",
                "b8c5e28b91f59c7a",
                "877a2e87b6b69bc1"
            ]
        ]
    },
    {
        "id": "013c5b78ffda5222",
        "type": "ui_toast",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "position": "top right",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "開始綁定流程",
        "name": "Start綁定",
        "x": 960,
        "y": 840,
        "wires": []
    },
    {
        "id": "b8c5e28b91f59c7a",
        "type": "change",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "name": "clear Table",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "[]",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 410,
        "y": 880,
        "wires": [
            [
                "e48e67b9deb41cf2"
            ]
        ]
    },
    {
        "id": "877a2e87b6b69bc1",
        "type": "function",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "name": "Add Node",
        "func": "var jsonFile = global.get(\"jsonFile\")\nvar uid = msg.payload.uid\nvar devMac = msg.payload.mac\nvar device = { devMac, devName: \"\", devType: msg.payload , devPosition :\"\" , devGroup :\"\" , uid, \"state\": 1 }\njsonFile.devices.push(device)\nglobal.set(\"jsonFile\", jsonFile)\nreturn { payload: jsonFile };",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 960,
        "wires": [
            [
                "efa54db14fb13f2f"
            ]
        ]
    },
    {
        "id": "efa54db14fb13f2f",
        "type": "link out",
        "z": "8cbec6d1d47d2ee2",
        "g": "ecafa6091ee23aa4",
        "name": "link out 1",
        "mode": "link",
        "links": [
            "da70d3343c11c582"
        ],
        "x": 505,
        "y": 960,
        "wires": []
    },
    {
        "id": "c557bea2b1ac609e",
        "type": "function",
        "z": "8cbec6d1d47d2ee2",
        "g": "0d53d99ff5bb2375",
        "name": "set table data",
        "func": "\nif ( msg.payload.uid != \"NOT_FOUND\"){\n    var jsonFile = global.get (\"jsonFile\")\n    var devices = jsonFile.devices\n    \n    return {payload : devices}\n}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 1080,
        "wires": [
            [
                "8b31d656beef7858",
                "8f8d0ffbf6217586"
            ]
        ]
    },
    {
        "id": "8b31d656beef7858",
        "type": "ui_table",
        "z": "8cbec6d1d47d2ee2",
        "g": "0d53d99ff5bb2375",
        "group": "d96c0dea78d55eb4",
        "name": "Show Device",
        "order": 2,
        "width": "12",
        "height": "4",
        "columns": [
            {
                "field": "state",
                "title": "在線",
                "width": "",
                "align": "center",
                "formatter": "tickCross",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "devName",
                "title": "類別名稱",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "uid",
                "title": "UID",
                "width": "",
                "align": "center",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "devMac",
                "title": "MAC Addr",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "devPosition",
                "title": "位置",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "devType",
                "title": "裝置敘述",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 1,
        "cts": true,
        "x": 850,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "8f8d0ffbf6217586",
        "type": "debug",
        "z": "8cbec6d1d47d2ee2",
        "g": "0d53d99ff5bb2375",
        "name": "debug 2",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 840,
        "y": 1080,
        "wires": []
    },
    {
        "id": "401f71bb2b254823",
        "type": "delay",
        "z": "8cbec6d1d47d2ee2",
        "g": "0d53d99ff5bb2375",
        "name": "delay50ms",
        "pauseType": "delay",
        "timeout": "50",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 450,
        "y": 1080,
        "wires": [
            [
                "c557bea2b1ac609e"
            ]
        ]
    },
    {
        "id": "51e7de832ca1b2b6",
        "type": "inject",
        "z": "8cbec6d1d47d2ee2",
        "g": "0d53d99ff5bb2375",
        "name": "reload show",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "10",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 230,
        "y": 1100,
        "wires": [
            [
                "401f71bb2b254823",
                "c5b70cac176018c7"
            ]
        ]
    },
    {
        "id": "c5b70cac176018c7",
        "type": "function",
        "z": "8cbec6d1d47d2ee2",
        "g": "0d53d99ff5bb2375",
        "name": "clear data",
        "func": "    \n    return {payload : []}\n\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 660,
        "y": 1140,
        "wires": [
            [
                "8b31d656beef7858"
            ]
        ]
    },
    {
        "id": "54dd10c75cfcdfbe",
        "type": "comment",
        "z": "8cbec6d1d47d2ee2",
        "g": "0d53d99ff5bb2375",
        "name": "",
        "info": "固定10sec\n清除  table 後 \n抓取  device json 變數 顯示於 table ",
        "x": 190,
        "y": 1160,
        "wires": []
    },
    {
        "id": "8b0d2d21cbcf613d",
        "type": "mqtt out",
        "z": "2d7ff302c568ee90",
        "name": "",
        "topic": "",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "f369e790a5abd286",
        "x": 590,
        "y": 200,
        "wires": []
    },
    {
        "id": "60df95f8d9109d7d",
        "type": "debug",
        "z": "2d7ff302c568ee90",
        "name": "debug 21",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 120,
        "wires": []
    },
    {
        "id": "f095b0f633d5e023",
        "type": "inject",
        "z": "2d7ff302c568ee90",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "AI_campus/status_reply",
        "payload": "{\"gwMac\":\"70:00:11:22:33:44\",\"devices\":[{\"devUid\":\"0x0100\",\"devName\":\"sensor\",\"temp\":35,\"humtdity\":87}],\"seg\":10}",
        "payloadType": "json",
        "x": 290,
        "y": 200,
        "wires": [
            [
                "8b0d2d21cbcf613d"
            ]
        ]
    },
    {
        "id": "00b3a62f0c243f89",
        "type": "mqtt in",
        "z": "2d7ff302c568ee90",
        "name": "",
        "topic": "AI_campus/status_reply",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "f369e790a5abd286",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 320,
        "y": 120,
        "wires": [
            [
                "60df95f8d9109d7d"
            ]
        ]
    },
    {
        "id": "8c5f9981ee2dd290",
        "type": "ui_toast",
        "z": "2d7ff302c568ee90",
        "position": "prompt",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "Cancel",
        "raw": true,
        "className": "",
        "topic": "a",
        "name": "",
        "x": 450,
        "y": 280,
        "wires": [
            [
                "0809313b0e850381"
            ]
        ]
    },
    {
        "id": "0809313b0e850381",
        "type": "debug",
        "z": "2d7ff302c568ee90",
        "name": "debug 22",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 600,
        "y": 280,
        "wires": []
    },
    {
        "id": "4c374840b57fd9b7",
        "type": "inject",
        "z": "2d7ff302c568ee90",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 290,
        "y": 280,
        "wires": [
            [
                "8c5f9981ee2dd290"
            ]
        ]
    },
    {
        "id": "01106830a08d6e2b",
        "type": "comment",
        "z": "2d7ff302c568ee90",
        "name": "Sanmic Note",
        "info": "**SOP:**\nStep 01: Set MQTT Server IP\nStep 02: Sccribe the topic\nStep 03: Publicition\nStep 04: Verify the result\n",
        "x": 850,
        "y": 120,
        "wires": []
    },
    {
        "id": "0c7912d713b79779",
        "type": "ui_text_input",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "label": "設定角色",
        "tooltip": "",
        "group": "fb11317658e87bd3",
        "order": 1,
        "width": 8,
        "height": 2,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "big",
        "topicType": "msg",
        "x": 280,
        "y": 120,
        "wires": [
            [
                "90cfaae73f641e1c"
            ]
        ],
        "inputLabels": [
            "7777"
        ]
    },
    {
        "id": "c2c7132e39e20f52",
        "type": "ui_text",
        "z": "8250ec7acc54b0b5",
        "group": "17173f7c1a5033d3",
        "order": 2,
        "width": 24,
        "height": 1,
        "name": "",
        "label": "回答",
        "format": "{{msg.payload}}",
        "layout": "row-spread",
        "className": "",
        "style": false,
        "font": "",
        "fontSize": 16,
        "color": "#000000",
        "x": 1190,
        "y": 440,
        "wires": []
    },
    {
        "id": "2a6fb02ae241720e",
        "type": "ui_text_input",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "label": "輸入",
        "tooltip": "",
        "group": "fb11317658e87bd3",
        "order": 2,
        "width": 8,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 270,
        "y": 160,
        "wires": [
            [
                "b6344163995256bf"
            ]
        ]
    },
    {
        "id": "ea58ca5775702fe1",
        "type": "ui_button",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "group": "fb11317658e87bd3",
        "order": 3,
        "width": 8,
        "height": 1,
        "passthru": false,
        "label": "送出",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 200,
        "wires": [
            [
                "27204de6a98939fc"
            ]
        ]
    },
    {
        "id": "394fee8dc155e255",
        "type": "function",
        "z": "8250ec7acc54b0b5",
        "name": "取得回應",
        "func": "var data = msg.payload\nmsg.payload = data.choices[0].message.content\nmsg.topic = \"command\"\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 360,
        "wires": [
            [
                "c2c7132e39e20f52",
                "6699b697c6e8af0e",
                "1a6b6e9bc7562525"
            ]
        ]
    },
    {
        "id": "e0f1880c51063453",
        "type": "openai",
        "z": "8250ec7acc54b0b5",
        "name": "OpenAI",
        "api": "sk-TWR況dV0wACnGVld2Z2lGaT3BlbkFJzuHJZsQdL7kledtbVNnk",
        "creds": "f3b36070034d01cb",
        "x": 860,
        "y": 360,
        "wires": [
            [
                "394fee8dc155e255",
                "ec2d0307f303c3e6"
            ]
        ]
    },
    {
        "id": "27204de6a98939fc",
        "type": "function",
        "z": "8250ec7acc54b0b5",
        "name": "準備 OPENAI 資料",
        "func": "\nmsg.api = 'chat/completions';\nvar system_content = flow.get(\"GPT_system\");\nvar content = flow.get (\"user_content\");\nmsg.params = {\n    \"model\": \"gpt-4\",\n    \"messages\": [\n        {\n            \"role\": \"system\",\n            \"content\": \"\",\n        },\n        {\n            \"role\": \"user\",\n            \"content\": \"\",\n        }\n    ],\n    \"max_tokens\": 100,\n    \"temperature\": 0\n}\n\nmsg.params.messages[0].content = system_content;\nmsg.params.messages[1].content = content;\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 200,
        "wires": [
            [
                "f0329408dc4fe205"
            ]
        ],
        "icon": "font-awesome/fa-th-list"
    },
    {
        "id": "90cfaae73f641e1c",
        "type": "change",
        "z": "8250ec7acc54b0b5",
        "name": "設定角色指令",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "GPT_system",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "b6344163995256bf",
        "type": "change",
        "z": "8250ec7acc54b0b5",
        "name": "設定輸入的內容",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "user_content",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "6699b697c6e8af0e",
        "type": "ui_audio",
        "z": "8250ec7acc54b0b5",
        "name": "播放聲音",
        "group": "fb11317658e87bd3",
        "voice": "Microsoft Yating - Chinese (Traditional, Taiwan)",
        "always": "",
        "x": 1200,
        "y": 400,
        "wires": []
    },
    {
        "id": "1a6b6e9bc7562525",
        "type": "function",
        "z": "8250ec7acc54b0b5",
        "name": "Parse 開啟關閉",
        "func": "\nif (msg.payload.includes(\"開啟\") == true)\n    return {payload:true}\n\nif (msg.payload.includes(\"關閉\") == true)\n    return {payload:false}\n",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1220,
        "y": 360,
        "wires": [
            [
                "bb9242bc2cc1acb9"
            ]
        ]
    },
    {
        "id": "d0b81c7f556f5f6a",
        "type": "link out",
        "z": "8250ec7acc54b0b5",
        "name": "link out 7",
        "mode": "link",
        "links": [],
        "x": 1505,
        "y": 360,
        "wires": []
    },
    {
        "id": "4338369cb930d5b1",
        "type": "change",
        "z": "8250ec7acc54b0b5",
        "name": "設定插座UID",
        "rules": [
            {
                "t": "set",
                "p": "plugUID",
                "pt": "flow",
                "to": "0x0100",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "94588e9c2dec8f16",
        "type": "inject",
        "z": "8250ec7acc54b0b5",
        "name": "初始設定觸發",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 300,
        "y": 80,
        "wires": [
            [
                "4338369cb930d5b1"
            ]
        ]
    },
    {
        "id": "ec2d0307f303c3e6",
        "type": "debug",
        "z": "8250ec7acc54b0b5",
        "name": "debug 19",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 400,
        "wires": []
    },
    {
        "id": "0fc7d01a1c3a4e06",
        "type": "comment",
        "z": "8250ec7acc54b0b5",
        "name": "Sanmic Note",
        "info": "SOP:\nStep 01: Get API Key and Token\nStep 02:\nStep 03:\nStep 04:\nStep 05:  Verify the result\n\n你是一台冷氣機，當我說熱的時候，你要回答開啟，當我說冷的時候，你要回答關閉\n我好熱\n\n",
        "x": 990,
        "y": 140,
        "wires": []
    },
    {
        "id": "32b1b34bf7f24f1f",
        "type": "ui_dropdown",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "label": "Input",
        "tooltip": "",
        "place": "Select option",
        "group": "a6c6937c0c826ac4",
        "order": 2,
        "width": 8,
        "height": 1,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "我好冷",
                "value": "我好冷",
                "type": "str"
            },
            {
                "label": "我好熱",
                "value": "我好熱",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "payload",
        "topicType": "msg",
        "className": "",
        "x": 270,
        "y": 320,
        "wires": [
            [
                "a54bab35028f5e6d"
            ]
        ],
        "inputLabels": [
            "7777"
        ]
    },
    {
        "id": "bb3b17b1ca8b382c",
        "type": "ui_dropdown",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "label": "Set_Role",
        "tooltip": "",
        "place": "Select option",
        "group": "a6c6937c0c826ac4",
        "order": 1,
        "width": 8,
        "height": 2,
        "passthru": true,
        "multiple": false,
        "options": [
            {
                "label": "現在你是一台冷氣  當我說冷  你要回答 調高溫度",
                "value": "現在你是一台冷氣  當我說冷  你要回答 調高溫度",
                "type": "str"
            },
            {
                "label": "現在你是一台冷氣  當我說熱  你要回答 調低溫度",
                "value": "現在你是一台冷氣  當我說熱  你要回答 調低溫度",
                "type": "str"
            }
        ],
        "payload": "",
        "topic": "payload",
        "topicType": "msg",
        "className": "",
        "x": 280,
        "y": 280,
        "wires": [
            [
                "11acf4b6226dddfc"
            ]
        ],
        "inputLabels": [
            "7777"
        ]
    },
    {
        "id": "11acf4b6226dddfc",
        "type": "change",
        "z": "8250ec7acc54b0b5",
        "name": "設定角色指令",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "GPT_system_opt",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "a54bab35028f5e6d",
        "type": "change",
        "z": "8250ec7acc54b0b5",
        "name": "設定輸入的內容",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "user_content_opt",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "f0329408dc4fe205",
        "type": "link out",
        "z": "8250ec7acc54b0b5",
        "name": "Manual_AI_in",
        "mode": "link",
        "links": [
            "a804a1d4c8562e51"
        ],
        "x": 655,
        "y": 200,
        "wires": []
    },
    {
        "id": "a804a1d4c8562e51",
        "type": "link in",
        "z": "8250ec7acc54b0b5",
        "name": "ChatGPT_In",
        "links": [
            "f0329408dc4fe205",
            "ba37983aac069bcf",
            "dde6659c5a86100f"
        ],
        "x": 755,
        "y": 360,
        "wires": [
            [
                "e0f1880c51063453"
            ]
        ]
    },
    {
        "id": "eee505c0d3412c02",
        "type": "ui_button",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "group": "a6c6937c0c826ac4",
        "order": 3,
        "width": 8,
        "height": 1,
        "passthru": false,
        "label": "Send",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 360,
        "wires": [
            [
                "f34ac9d522a8a711"
            ]
        ]
    },
    {
        "id": "f34ac9d522a8a711",
        "type": "function",
        "z": "8250ec7acc54b0b5",
        "name": "準備 OPENAI 資料",
        "func": "\nmsg.api = 'chat/completions';\nvar system_content = flow.get(\"GPT_system_opt\");\nvar content = flow.get (\"user_content_opt\");\nmsg.params = {\n    \"model\": \"gpt-4\",\n    \"messages\": [\n        {\n            \"role\": \"system\",\n            \"content\": \"\",\n        },\n        {\n            \"role\": \"user\",\n            \"content\": \"\",\n        }\n    ],\n    \"max_tokens\": 100,\n    \"temperature\": 0\n}\n\nmsg.params.messages[0].content = system_content;\nmsg.params.messages[1].content = content;\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 360,
        "wires": [
            [
                "ba37983aac069bcf"
            ]
        ],
        "icon": "font-awesome/fa-th-list"
    },
    {
        "id": "ba37983aac069bcf",
        "type": "link out",
        "z": "8250ec7acc54b0b5",
        "name": "Manual_AI_in",
        "mode": "link",
        "links": [
            "a804a1d4c8562e51"
        ],
        "x": 665,
        "y": 360,
        "wires": []
    },
    {
        "id": "70353dd208f93345",
        "type": "ui_microphone",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "group": "bb48ce9b02d1c374",
        "order": 3,
        "width": 1,
        "height": 1,
        "maxLength": 5,
        "maxRecogLength": 5,
        "timeslice": 0,
        "press": "press",
        "mode": "recog",
        "interimResults": false,
        "x": 90,
        "y": 420,
        "wires": [
            [
                "a8807b6fdd1ef143"
            ]
        ]
    },
    {
        "id": "a8807b6fdd1ef143",
        "type": "ui_text_input",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "label": "設定角色",
        "tooltip": "",
        "group": "bb48ce9b02d1c374",
        "order": 1,
        "width": 9,
        "height": 2,
        "passthru": true,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "big",
        "topicType": "msg",
        "x": 280,
        "y": 420,
        "wires": [
            [
                "48eb330958b63060"
            ]
        ],
        "inputLabels": [
            "7777"
        ]
    },
    {
        "id": "dde6659c5a86100f",
        "type": "link out",
        "z": "8250ec7acc54b0b5",
        "name": "Manual_AI_in",
        "mode": "link",
        "links": [
            "a804a1d4c8562e51"
        ],
        "x": 665,
        "y": 500,
        "wires": []
    },
    {
        "id": "ab8c69946e5f756f",
        "type": "ui_microphone",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "group": "bb48ce9b02d1c374",
        "order": 5,
        "width": 1,
        "height": 1,
        "maxLength": 5,
        "maxRecogLength": 5,
        "timeslice": 0,
        "press": "press",
        "mode": "recog",
        "interimResults": false,
        "x": 90,
        "y": 460,
        "wires": [
            [
                "4bddd4657b2e59cd"
            ]
        ]
    },
    {
        "id": "48eb330958b63060",
        "type": "change",
        "z": "8250ec7acc54b0b5",
        "name": "設定角色指令",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "GPT_system_opt1",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 420,
        "wires": [
            []
        ]
    },
    {
        "id": "a69951ce74752b8a",
        "type": "change",
        "z": "8250ec7acc54b0b5",
        "name": "設定輸入的內容",
        "rules": [
            {
                "t": "move",
                "p": "payload",
                "pt": "msg",
                "to": "user_content_opt1",
                "tot": "flow"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 480,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "4bddd4657b2e59cd",
        "type": "ui_text_input",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "label": "輸入",
        "tooltip": "",
        "group": "bb48ce9b02d1c374",
        "order": 4,
        "width": 9,
        "height": 1,
        "passthru": false,
        "mode": "text",
        "delay": "0",
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 270,
        "y": 460,
        "wires": [
            [
                "a69951ce74752b8a"
            ]
        ]
    },
    {
        "id": "5e87ce66cea5a029",
        "type": "ui_button",
        "z": "8250ec7acc54b0b5",
        "name": "",
        "group": "bb48ce9b02d1c374",
        "order": 6,
        "width": 10,
        "height": 1,
        "passthru": false,
        "label": "送出",
        "tooltip": "",
        "color": "",
        "bgcolor": "",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 500,
        "wires": [
            [
                "18097df3e9286ed7"
            ]
        ]
    },
    {
        "id": "18097df3e9286ed7",
        "type": "function",
        "z": "8250ec7acc54b0b5",
        "name": "準備 OPENAI 資料",
        "func": "\nmsg.api = 'chat/completions';\nvar system_content = flow.get(\"GPT_system_opt1\");\nvar content = flow.get (\"user_content_opt1\");\nmsg.params = {\n    \"model\": \"gpt-4\",\n    \"messages\": [\n        {\n            \"role\": \"system\",\n            \"content\": \"\",\n        },\n        {\n            \"role\": \"user\",\n            \"content\": \"\",\n        }\n    ],\n    \"max_tokens\": 100,\n    \"temperature\": 0\n}\n\nmsg.params.messages[0].content = system_content;\nmsg.params.messages[1].content = content;\nreturn msg",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 490,
        "y": 500,
        "wires": [
            [
                "dde6659c5a86100f"
            ]
        ],
        "icon": "font-awesome/fa-th-list"
    },
    {
        "id": "bb9242bc2cc1acb9",
        "type": "change",
        "z": "8250ec7acc54b0b5",
        "name": "Set PLUG",
        "rules": [
            {
                "t": "move",
                "p": "plugUID",
                "pt": "flow",
                "to": "uid",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "topic",
                "pt": "msg",
                "to": "PLUG",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 360,
        "wires": [
            [
                "d0b81c7f556f5f6a"
            ]
        ]
    }
]